---
title: ファイルシステム
icon: "folder-tree"
keyword: skills, skill
---

<Note> ⚠️ このドキュメントはAIによって自動翻訳されています。不正確な部分がある場合は、[英語版](/en/use-dify/build/file-system)を参照してください。</Note>

[サンドボックスランタイム](/ja/use-dify/build/runtime#サンドボックスランタイム)を使用する各アプリケーションには、LLM が必要に応じてファイルの読み取り、書き込み、処理を行えるファイルシステムがあります。

ファイルシステムには2種類のファイルが含まれます：

- **リソース**：Skill など、アップロードまたは作成された永続ファイル。

- **アーティファクト**：LLM が各実行時に生成する一時ファイル。

<Frame caption=""><img src="/images/workflow_file_system.png" alt="ファイルシステム"/></Frame>

## リソース

リソースはワークフロー用に作成またはインポートしたファイルです。LLM は読み取りのみ可能で、変更はできません。リソースは実行間で永続し、アプリのエクスポート時に含まれます。

### Skill

[Skill](https://agentskills.io/home) は、指示、ナレッジ、スクリプト、その他の参考資料を特定のタスク用にバンドルします——一度定義すれば、ワークフロー間で再利用できます。

たとえば、マーケティングコピーの生成のたびにスタイルガイドラインを繰り返し記述してブランド素材をアップロードする代わりに、すべてを含む `marketing-copy` Skill を作成し、必要なときに参照するだけで済みます。

Skill は詳細な SOP（標準作業手順書）、LLM は能力のある新入社員と考えてください。新入社員は汎用的な能力を持っていますが、会社固有のプロセスは知りません。Skill は必要なすべて——手順、参考資料、使用するツール——を提供し、期待通りにタスクを完了できるようにします。

#### Skill の作成またはインポート

他で使用していた Skill のインポート、用意された Skill テンプレートの利用、またはファイルシステムでのカスタム Skill の直接作成が可能です。

すべての Skill には `SKILL.md` ファイルが必要です。このファイルでタスクの内容、Skill の使用タイミング、実行手順を定義します。

`SKILL.md` 内では、利用可能なリソース（スクリプト、テンプレート、コンテキスト資料、[Dify ツール](/ja/use-dify/workspace/tools)）を参照し、いつどのように使用するかを指定できます。

<Frame caption=""><img src="/images/workflow_skill.png" alt="Skill"/></Frame>

#### プロンプトでの Skill の参照

プロンプトエディターで `/` を入力し、**ファイル**タブから Skill フォルダーを選択します。

LLM は最初に Skill のフロントマター（名前、説明、メタデータ）を読み取り、必要な場合にのみ全内容を読み込みます。これによりトークンが節約され、複数の Skill を使用する場合に特に効率的です。

## アーティファクト

アーティファクトは LLM が実行中に生成するファイル——レポート、画像、その他の出力です。LLM はアーティファクトに対して完全な読み書き権限を持ちます。

**Skills** タブまたはキャンバス下部の**変数検査**パネルでアーティファクトのプレビューとダウンロードができます。

### アーティファクトのライフサイクル

アーティファクトはテスト環境と本番環境で異なるライフサイクルを持ちます。アプリのエクスポート時にはアーティファクトは含まれません。

<Tabs>
  <Tab title="テスト実行 / プレビュー">
    アーティファクトはテスト実行間で保持されます。クリアするには、**変数検査**パネルの**すべてリセット**をクリックします。
  </Tab>
  <Tab title="本番環境">
    アーティファクトは各実行にスコープされ、実行完了時に自動的にクリアされます。
  </Tab>
</Tabs>

<Info>
    **アーティファクト**の下に `.bashrc` や `.profile` などのシステムファイルが表示されることがあります。これらはサンドボックス環境の一部であり、実行間で保持されます。
</Info>

### エンドユーザーへのアーティファクトの出力

アーティファクトはサンドボックス環境に保存されており、エンドユーザーに直接公開できません。出力するには、別の Agent ノードを通じて抽出する必要があります：

1. ファイルを生成するノードの下流に Agent ノードを追加します。

2. **Agent モード**をオフにし、**構造化出力**を有効にします。

3. ファイル型の構造化出力変数を追加します。

4. **対話履歴の追加**から上流 Agent ノードの対話履歴をインポートします。これにより LLM がファイルパスを特定できます。

5. ユーザーメッセージで、モデルにファイルの抽出と出力を指示します（例：「生成された PDF ファイルを出力してください」）。

6. 回答ノードまたは出力ノードで、Agent ノードのファイル出力変数を参照します。

## サポートされるファイルタイプと操作

ファイルシステム内のすべてのファイルはダウンロード可能です。一部はプレビューや編集も可能です。

<Tabs>
    <Tab title="編集可能">
    <Info>
        リソースのみ編集可能です。
    </Info>
    - **テキスト**: TXT, MD, MDX, HTML, HTM, XML, CSV
    - **コード**: Python, JavaScript, JSON, YAML および [Monaco Editor](https://microsoft.github.io/monaco-editor/) がサポートするすべての言語
    - **設定**: PROPERTIES, VTT
    </Tab>
    <Tab title="プレビューのみ">
        - **ドキュメント**: PDF, DOCX, DOC, XLSX, XLS, PPTX, PPT, EPUB
        - **画像**: JPG, JPEG, PNG, GIF, WEBP, SVG
        - **データ**: CSV, TSV, SQLite (.sqlite, .db) - テーブルプレビューのみ
        - **メール**: EML, MSG
    </Tab>
    <Tab title="ダウンロードのみ">
        - **音声**: MP3, M4A, WAV, WEBM, AMR
        - **動画**: MP4, MOV, MPEG, MPGA
        - **その他**: カスタムファイル拡張子
    </Tab>
</Tabs>
