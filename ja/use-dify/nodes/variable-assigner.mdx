---
title: "変数アサイナー"
description: "チャットフローアプリケーションで永続的な会話変数を管理"
icon: "pen-to-square"
---

<Note> ⚠️ このドキュメントはAIによって自動翻訳されています。不正確な部分がある場合は、[英語版](/en/use-dify/nodes/variable-assigner)を参照してください。</Note>

変数アサイナーノードは、会話変数への書き込み（さまざまなタイプの変数については[こちら](/ja/use-dify/getting-started/key-concepts#変数)を参照）によってチャットフローアプリケーションの永続的なデータを管理します。各実行でリセットされる通常のワークフロー変数とは異なり、会話変数はチャットセッション全体を通じて持続します。

<Frame caption="変数アサイナーノードの設定">
  <img src="https://assets-docs.dify.ai/2024/11/83d0b9ef4c1fad947b124398d472d656.png" alt="変数アサイナーのインターフェース" />
</Frame>

## 会話変数 vs ワークフロー変数

**ワークフロー変数**は単一のワークフロー実行中のみ存在し、ワークフローが完了するとリセットされます。

**会話変数**は同じチャットセッション内の複数の会話ターンにわたって持続し、ステートフルなインタラクションと文脈的なメモリを可能にします。

この持続性により、文脈的な会話、ユーザーのパーソナライゼーション、ステートフルなワークフロー、複数のユーザーインタラクションにわたる進捗追跡が可能になります。

## 設定

どの会話変数を更新するかを設定し、そのソースデータを指定します。単一のノードで複数の変数を割り当てることができます。

<Frame caption="変数割り当て設定インターフェース">
  <img src="https://assets-docs.dify.ai/2024/11/ee15dee864107ba5a93b459ebdfc32cf.png" alt="変数割り当ての設定" />
</Frame>

**変数** - 書き込む会話変数を選択

**変数設定** - 上流のワークフローノードからソースデータを選択

**操作モード** - 変数の更新方法を決定（上書き、追加、クリアなど）

## 操作モード

異なる変数タイプは、そのデータ構造に基づいて異なる操作をサポートします：

<Tabs>
  <Tab title="String">
    - **上書き** - 別の文字列変数で置き換える
    
    - **クリア** - 現在の値を削除する
    
    - **設定** - 固定値を手動で割り当てる
  </Tab>
  
  <Tab title="Number">
    - **上書き** - 別の数値変数で置き換える
    
    - **クリア** - 現在の値を削除する
    
    - **設定** - 固定値を手動で割り当てる
    
    - **算術演算** - 現在の値に対して別の数値で加算、減算、乗算、除算を行う
  </Tab>

  <Tab title="Boolean">
    - **上書き** - 別のブール変数で置き換える
    
    - **クリア** - 現在の値を削除する
    
    - **設定** - 固定値を手動で割り当てる
  </Tab>
  
  <Tab title="Object">
    - **上書き** - 別のオブジェクト変数で置き換える
    
    - **クリア** - 現在の値を削除する
    
    - **設定** - オブジェクトの構造と値を手動で定義する
  </Tab>
  
  <Tab title="Array">
    - **上書き** - 同じタイプの別の配列変数で置き換える
    
    - **クリア** - 配列からすべての要素を削除する
    
    - **追加** - 配列の最後に1つの要素を追加する
    
    - **拡張** - 同じタイプの別の配列からすべての要素を追加する
    
    - **最初/最後を削除** - 配列から最初または最後の要素を削除する

    <Tip>
      配列操作は、時間の経過とともに成長するメモリシステム、チェックリスト、会話履歴の構築において特に強力です。
    </Tip>

  </Tab>
</Tabs>


## 一般的な実装パターン

### スマートメモリシステム

会話から重要な情報を自動的に検出・保存するチャットボットを構築：

<Frame caption="スマートメモリシステムワークフロー">
  <img src="https://assets-docs.dify.ai/dify-enterprise-mintlify/en/guides/workflow/node/8d0492814b1515f50e87b2900ff400db.png" alt="スマートメモリの実装" />
</Frame>

システムはユーザー入力を記憶すべき事実について分析し、構造化された情報を抽出し、今後の会話で参照するために永続的なメモリ配列に追加します。

### ユーザー設定の保存

言語設定、通知設定、表示オプションなどのユーザー設定を保存：

<Frame caption="ユーザー設定の管理">
  <img src="https://assets-docs.dify.ai/dify-enterprise-mintlify/en/guides/workflow/node/1867d608a7d009431b73377ed65b427b.png" alt="ユーザー設定ワークフロー" />
</Frame>

**上書き**モードを使用してユーザー入力から初期設定をキャプチャし、パーソナライズされたインタラクションのために後続のすべてのLLMレスポンスでそれらを参照します。

### 段階的チェックリスト

複数の会話ターンにわたって完了状況を追跡するガイド付きワークフローの構築：

<Frame caption="段階的チェックリストの実装">
  <img src="https://assets-docs.dify.ai/dify-enterprise-mintlify/en/guides/workflow/node/c4362b01298b12e7d6fcd9e798f3165a.png" alt="段階的チェックリストワークフロー" />
</Frame>

配列会話変数を使用して完了した項目を追跡します。変数アサイナーは各ターンでチェックリストを更新し、LLMはそれを参照してユーザーを残りのタスクを通じてガイドします。
