---
title: "リスト演算子"
description: "配列から要素をフィルタリング、ソート、選択"
icon: "filter"
---

<Note> ⚠️ このドキュメントはAIによって自動翻訳されています。不正確な部分がある場合は、[英語版](/en/use-dify/nodes/list-operator)を参照してください。</Note>

リスト演算子ノードは、配列のフィルタリング、ソート、特定の要素の選択を行います。混合ファイルアップロード、大規模なデータセット、または下流処理の前に分離や整理が必要な配列データを扱う際に使用します。

サポートされる入力データ型には、`array[string]`、`array[number]`、`array[file]`、`array[boolean]`があります。

<Frame caption="リスト演算子ノードインターフェース">
  <img src="https://assets-docs.dify.ai/dify-enterprise-mintlify/en/guides/workflow/node/522a0c932aab93d4f3970168412f759e.png" alt="リスト演算子インターフェース" />
</Frame>

## 配列処理の問題

ほとんどのワークフローノードは、配列ではなく単一の値を期待します。`[image.png, document.pdf, audio.mp3]`のような混合コンテンツが1つの変数に含まれている場合、これを下流ノードが効果的に処理できる専用のストリームに分離する必要があります。

リスト演算子はインテリジェントなルーターとして機能し、フィルターを使用して混合配列を分離し、専門的な処理のために準備します。

<Frame caption="配列処理ワークフローの例">
  <img src="https://assets-docs.dify.ai/dify-enterprise-mintlify/en/guides/workflow/node/812d1b2f167065e17df8392b2cb3cc8a.png" alt="配列処理の例" />
</Frame>

## 操作

### フィルタリング

属性に基づいて特定のアイテムを抽出します。ファイル配列の場合、以下でフィルタリングできます：

<Tabs>
  <Tab title="コンテンツプロパティ">
    **タイプ** - コンテンツカテゴリでフィルタリング：画像、文書、音声、動画
    
    **MIMEタイプ** - 正確なコンテンツタイプの識別（image/jpeg、application/pdfなど）
    
    **拡張子** - ファイル拡張子（.pdf、.jpg、.mp3、.docxなど）
  </Tab>
  
  <Tab title="ファイルプロパティ">
    **サイズ** - 処理制限のためのファイルサイズ制約
    
    **名前** - ファイル名パターンまたは特定の名前
    
    **転送方法** - ローカルアップロードとURLベースのファイルを区別
  </Tab>
</Tabs>

### ソート

任意の属性でフィルタリング結果を整理します：

**昇順（ASC）** - 最小から最大の値、A-Zのアルファベット順

**降順（DESC）** - 最大から最小の値、Z-Aの逆順

### 選択

処理された配列から特定の要素を選択します：

**最初のN個を取得** - フィルタリングとソート後の最初の1～20個のアイテムを選択

**最初のレコード** - 最初にマッチした要素のみを単一の値として返す

**最後のレコード** - 最後にマッチした要素のみを単一の値として返す

## 出力変数

**result** - バルク処理用の完全なフィルタリングおよびソート済み配列

**first_record** - 先頭からの単一要素、「主要」または「最新」アイテム選択に最適

**last_record** - 末尾からの単一要素、「最新」または「最終」選択に有用

## 混合ファイル処理の例

ユーザーが文書と画像の両方をアップロードするワークフローを処理します：

<Frame caption="混合ファイル処理ワークフロー">
  <img src="https://assets-docs.dify.ai/dify-enterprise-mintlify/en/guides/workflow/node/610358293217e54b55b7e1d4d16bf83c.png" alt="混合ファイル処理の例" />
</Frame>

**実装手順：**

1. **混合アップロードの設定** - 複数のファイルタイプを受け入れるファイルアップロード機能を有効化
2. **タイプ別に分割** - 異なるフィルターを持つ別々のリスト演算子ノードを使用：
   - `type = "image"`でフィルタリング → ビジョン機能を持つLLMにルーティング
   - `type = "document"`でフィルタリング → 文書抽出器にルーティング
3. **適切に処理** - 画像は直接分析され、文書はテキスト抽出が行われる
4. **結果を結合** - 処理された出力を統一されたレスポンスにマージ

このパターンは、異なるファイルタイプを適切なプロセッサーに自動的にルーティングし、シームレスなマルチモーダルユーザーエクスペリエンスを作成します。