---
title: 人的介入
description: ワークフローを一時停止して、人間の入力、レビュー、または意思決定を要求します
icon: user-magnifying-glass
---

**人的介入ノード**は、ワークフローを主要なポイントで一時停止し、実行を継続する前に人間による入力を要求します。

実行がこのノードに到達すると、カスタマイズ可能なリクエストフォームが特定のチャネルを通じて配信されます。受信者は、入力の提供、データの確認、およびワークフローの進行方法を決定する事前に定義された決定肢からの選択を行うことができます。

重要な場面に人間の判断を直接組み込むことで、**自動化による効率性と人間による監視のバランス**をとることができます。

<Frame caption="リクエストフォームの例"><img src="/images/human_input_request_form_example.png" alt="リクエストフォームの例" /></Frame>

## 設定

ノードがどのように人間の入力を要求し処理するかを定義するために、以下を設定します：

- **配信方法**: リクエストフォームがどのように受信者に届くか。

- **フォーム内容**: 受信者に表示される情報と、受信者が入力できる内容。

- **ユーザーアクション**: 受信者が行える決定と、それに応じたワークフローの進行方法。

- **タイムアウト戦略**: 待機時間と、受信者が応答しなかった場合の処理。

### 配信方法

リクエストを配信するチャネルを選択します。現在利用可能な方法は以下の通りです：

- **Webアプリ**: 現在のユーザーが応答できるように、Webアプリのインターフェースに直接リクエストフォームを表示します。

- **メール**: リクエストリンクを含むメールを1人または複数の受信者に送信します。

<Note>
    配信方法に関わらず、最初の応答があった時点でリクエストはクローズされます。
</Note>

### フォーム内容

リクエストフォームに表示される内容をカスタマイズします：

- **Markdownによるフォーマットと構造化**

  見出し、リスト、太字、リンクなどのMarkdown要素を使用して、情報を明確に提示します。

- **変数による動的データの表示**

  ワークフロー変数を参照して、レビュー用のAI生成テキストや上流ノードからの必要なコンテキスト情報などの動的コンテンツを表示します。

    <Tip>
        推論モデルからの `text` 出力変数を参照する場合、フォームには最終的な回答とともにモデルの思考プロセスが表示されます。
    
        回答のみを表示するには、対応するLLMノードで **推論タグの分離を有効にする（Enable Reasoning Tag Separation）** をオンにしてください。
    </Tip>

- **入力フィールドによる入力の収集**

  入力フィールドは、空の状態から始めることも、受信者が編集できるように変数（例：修正するLLMの出力）や静的テキスト（例：例やデフォルト値）を事前に入れておくことも可能です。

  各入力フィールドは、下流で使用するための変数となります。例えば、編集されたコンテンツをさらなる処理のために渡したり、再生成のためにLLMにフィードバックを送信したりできます。

### ユーザーアクション

受信者がクリックできる決定ボタンを定義します。各ボタンは、ワークフローを異なる実行パスにルーティングします。

例えば、`投稿` ブランチはコンテンツの公開をトリガーするノードにつながり、`再生成` ブランチはコンテンツを修正するためにLLMノードにループバックするような構成が可能です。

<Tip>
    プリセットのボタンスタイルを使用して、アクションを視覚的に区別します。
    
    例えば、`承認` のような重要なアクションには目立つスタイルを使用し、二次的なオプションには控えめなスタイルを使用します。
</Tip>

### タイムアウト戦略

リクエストが期限切れになるまで応答を待機する時間を設定します。

設定時間内に受信者が応答しなかった場合、タイムアウトを処理するためのフォールバックブランチ（例：通知の送信やリクエストの再試行）を定義していない限り、ワークフローは自動的に終了します。