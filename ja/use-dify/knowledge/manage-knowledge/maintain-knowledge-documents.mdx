---
title: ナレッジコンテンツの管理
sidebarTitle: コンテンツの管理
---

<Note> ⚠️ このドキュメントはAIによって自動翻訳されています。不正確な部分がある場合は、[英語版](/en/use-dify/knowledge/manage-knowledge/maintain-knowledge-documents)を参照してください。</Note>

## ドキュメントの管理

ナレッジベース内では、インポートされたすべてのアイテム（ローカルファイル、Notion ページ、またはウェブページなど）がドキュメントとして扱われます。ドキュメント一覧から、すべてのドキュメントを閲覧・管理し、ナレッジの正確性、関連性、最新性を維持できます。

<Tip>
    画面上部のナレッジベース名をクリックすると、他のナレッジベースへ素早く切り替えできます。
</Tip>

![ナレッジドキュメントの管理](/images/manage_knowledge_documents.png)

| 操作                   | 説明          |
|:----------------------|:---------------------|
| 追加                   | 新しいドキュメントをインポートします。|
| チャンク設定の変更       | ドキュメントのチャンク設定を変更します（チャンク構造を除く）。<Info>各ドキュメントには個別のチャンク設定を持たせることができますが、チャンク構造はナレッジベース全体で共通であり、一度設定すると変更できません。</Info>|
| 削除                   | ドキュメントを完全に削除します。**削除は元に戻せません。**|
| 有効／無効    | 一時的にドキュメントを検索対象に含める／除外します。<Note>Dify Cloud では、一定期間更新または検索に使用されていないドキュメントは、自動的に無効化されパフォーマンスが最適化されます。<br/><br/>非アクティブ期間はプランごとに異なります：<ul><li>Sandbox：7日</li><li>Professional／Team：30日</li></ul> Professional および Team プランのユーザーは、**ワンクリックで**これらのドキュメントを再有効化できます。</Note> |
| アーカイブ／アーカイブ解除 | 検索には不要だが保持しておきたいドキュメントをアーカイブします。アーカイブ済みドキュメントは読み取り専用で、いつでもアーカイブ解除可能です。|
| 編集                   | ドキュメント内のチャンクを編集して、コンテンツを修正します。詳細は [チャンクの管理](#チャンクの管理) を参照してください。|
| 名前を変更              | ドキュメントの名前を変更します。|

## チャンクの管理

チャンク設定に基づき、すべてのドキュメントは検索の基本単位であるコンテンツチャンクに分割されます。各ドキュメント内のチャンク一覧からそれらを閲覧・管理し、検索の効率と精度を最適化できます。

<Tip>
    左上のドキュメント名をクリックして、別のドキュメントに素早く切り替えられます。
</Tip>

![チャンクの管理](/images/manage_document_chunks.png)

| 操作   | 説明          |
|:-------- |:---------------------|
| 追加     | 新しいチャンクを1つまたは複数まとめて追加します。<br/><br/>親子分割モード（階層分割モード）のドキュメントでは、親チャンクと子チャンクの両方を追加可能です。<Info>「チャンクを追加」は有料機能です。Dify Cloud で利用するには [Professional または Team プラン](https://dify.ai/jp/pricing) へのアップグレードが必要です。</Info>|
| 削除  | チャンクを完全に削除します。**削除は元に戻せません。**|
| 有効／無効 | 一時的にチャンクを検索対象に含める／除外します。無効化されたチャンクは編集できません。|
| 編集    | チャンクの内容を修正します。編集されたチャンクは **「編集済み」** と表示されます。<br/><br/>親子分割モード（階層分割モード）のドキュメントでは：<ul><li>親チャンクを編集するとき、子チャンクを再生成するか保持するかを選択できます。</li><li>子チャンクを編集しても、親チャンクには影響しません。</li></ul><Tip>ドキュメント内の画像が添付ファイルとして抽出される場合、そのURLはチャンクテキスト内に残ります。これらのURLを削除しても、抽出された画像の添付ファイルには影響しません。</Tip>|
| キーワードの追加／編集／削除  | 経済的インデックス方式を使用するナレッジベースでは、各チャンクに対してキーワードを追加・編集して検索精度を向上させることができます。<br/><br/>1つのチャンクにつき最大10個のキーワードを設定可能です。 |
| 画像の追加／削除 | ドキュメントから抽出された画像を削除したり、対応するチャンク内に新しい画像をアップロードしたりできます。<br/><br/>画像の添付ファイルとチャンクは独立して編集でき、互いに影響しません。<Note> 各チャンクには最大10枚まで画像の添付が可能で、検索時に一緒に返されます。これを超える画像は抽出されません。<br/><br/>セルフホスティング環境では、環境変数 `SINGLE_CHUNK_ATTACHMENT_LIMIT` を変更してこの制限を調整できます。</Note><Tip>クロスモーダル検索（テキストと画像の両方を意味的関連性に基づいて検索）を有効にするには、ナレッジベースに多モーダル埋め込みモデル（**Vision** アイコン付き）を選択してください。画像の添付ファイルは埋め込み・インデックス化され、検索に利用されます。</Tip>|

## ベストプラクティス

### チャンク品質の確認

ドキュメントをチャンク分割した後は、各チャンクを丁寧に確認し、意味的に完結し、検索精度と回答の関連性を最適化できるサイズであることを確認してください。

注意すべき一般的な問題：

- チャンクが **短すぎる**：文脈不足により意味情報が失われ、回答の精度が低下します。

- チャンクが **長すぎる**：不要情報を含み、意味的ノイズを引き起こして検索精度を下げます。

- チャンクが **意味的に不完全**：文や段落の途中で強制的に区切られた結果、検索時に情報が欠落または誤解を招く場合があります。

### 子チャンクを親チャンクの検索フックとして使用

親子分割モード（階層分割モード）で分割されたドキュメントでは、システムは子チャンクを検索し、結果として親チャンクを返します。子チャンクを編集しても親チャンクは更新されないため、子チャンクを親チャンクの **セマンティックタグ（意味的タグ）** や **検索ヒント** として活用できます。

そのためには、子チャンクを **キーワード**・**要約**・**ユーザーの一般的な質問** のいずれかに書き換えることを推奨します。
たとえば、親チャンクが *返品ポリシー* 全体を扱う場合、子チャンクを次のように設定できます：

- 「商品を返品するにはどうすればいいですか？」

- 「返金期間はどのくらいですか？」

- 「返品時の送料はかかりますか？」
