{
  "openapi": "3.0.1",
  "info": {
    "title": "ワークフローアプリ API",
    "description": "ワークフローアプリケーションは非セッションサポートを提供し、翻訳、記事作成、要約AIなどに最適です。",
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "{api_base_url}",
      "description": "ワークフローアプリ APIのベースURL。{api_base_url}を実際のAPIベースURLに置き換えてください。",
      "variables": {
        "api_base_url": {
          "default": "https://api.dify.ai/v1",
          "description": "APIの実際のベースURL"
        }
      }
    }
  ],
  "security": [
    {
      "ApiKeyAuth": []
    }
  ],
  "paths": {
    "/workflows/run": {
      "post": {
        "summary": "ワークフローを実行",
        "description": "ワークフローを実行します。公開されたワークフローがない場合は実行できません。",
        "operationId": "executeWorkflow",
        "tags": [
          "Workflow Execution"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WorkflowExecutionRequest"
              },
              "examples": {
                "basic_execution": {
                  "summary": "基本的なワークフロー実行",
                  "value": {
                    "inputs": {
                      "query": "Summarize this text: ..."
                    },
                    "response_mode": "streaming",
                    "user": "user_workflow_123"
                  }
                },
                "with_file_array_variable": {
                  "summary": "ファイル配列入力変数を使用した例",
                  "value": {
                    "inputs": {
                      "my_documents": [
                        {
                          "type": "document",
                          "transfer_method": "local_file",
                          "upload_file_id": "uploaded_file_id_abc"
                        },
                        {
                          "type": "image",
                          "transfer_method": "remote_url",
                          "url": "https://example.com/image.jpg"
                        }
                      ]
                    },
                    "response_mode": "blocking",
                    "user": "user_workflow_456"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "ワークフロー実行が成功しました。構造は`response_mode`によって異なります。\n- `blocking`: `WorkflowCompletionResponse`を含む`application/json`。\n- `streaming`: `ChunkWorkflowEvent`ストリームを含む`text/event-stream`。",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkflowCompletionResponse"
                }
              },
              "text/event-stream": {
                "schema": {
                  "type": "string",
                  "description": "Server-Sent Eventsのストリーム。構造については`ChunkWorkflowEvent`を参照してください。"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestWorkflow"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/workflows/run/{workflow_run_id}": {
      "get": {
        "summary": "ワークフロー実行詳細を取得",
        "description": "ワークフロー実行IDに基づいてワークフロータスクの現在の実行結果を取得します。",
        "operationId": "getWorkflowRunDetail",
        "tags": [
          "Workflow Execution"
        ],
        "parameters": [
          {
            "name": "workflow_run_id",
            "in": "path",
            "required": true,
            "description": "ワークフロー実行ID。ワークフロー実行レスポンスまたはストリーミングイベントから取得できます。",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "ワークフロー実行詳細の取得に成功しました。",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkflowRunDetailResponse"
                }
              }
            }
          },
          "404": {
            "description": "ワークフロー実行が見つかりません。"
          }
        }
      }
    },
    "/workflows/tasks/{task_id}/stop": {
      "post": {
        "summary": "ワークフロータスクの生成を停止",
        "description": "ワークフロータスクの生成を停止します。ストリーミングモードでのみサポートされています。",
        "operationId": "stopWorkflowTaskGeneration",
        "tags": [
          "Workflow Execution"
        ],
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "description": "ストリーミングチャンクからのタスクID。",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "user"
                ],
                "properties": {
                  "user": {
                    "type": "string",
                    "description": "ユーザー識別子。"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "$ref": "#/components/responses/SuccessResult"
          }
        }
      }
    },
    "/files/upload": {
      "post": {
        "summary": "ワークフロー用ファイルアップロード",
        "description": "ワークフローで使用するファイルをアップロードします。ワークフローでサポートされている任意の形式に対応しています。アップロードされたファイルは現在のエンドユーザー専用です。",
        "operationId": "uploadWorkflowFile",
        "tags": [
          "Files"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "required": [
                  "file",
                  "user"
                ],
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary",
                    "description": "アップロードするファイル。"
                  },
                  "user": {
                    "type": "string",
                    "description": "ユーザー識別子。"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "ファイルのアップロードに成功しました。",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FileUploadResponse"
                }
              }
            }
          },
          "201": {
            "description": "ファイルの作成に成功しました（代替の成功コード）。",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FileUploadResponse"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestFile"
          },
          "413": {
            "$ref": "#/components/responses/FileTooLarge"
          },
          "415": {
            "$ref": "#/components/responses/UnsupportedFileTypeFile"
          },
          "503": {
            "$ref": "#/components/responses/S3ErrorFile"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/workflows/logs": {
      "get": {
        "summary": "ワークフローログを取得",
        "description": "ワークフローログを返します。最初のページは最新の`{limit}`件のメッセージを返します（逆順）。",
        "operationId": "getWorkflowLogs",
        "tags": [
          "Workflow Execution"
        ],
        "parameters": [
          {
            "name": "keyword",
            "in": "query",
            "description": "検索キーワード。",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "status",
            "in": "query",
            "description": "ステータスでフィルタリング。",
            "schema": {
              "type": "string",
              "enum": [
                "succeeded",
                "failed",
                "stopped",
                "running"
              ]
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "現在のページ。",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "ページあたりのアイテム数。",
            "schema": {
              "type": "integer",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "ワークフローログの取得に成功しました。",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkflowLogsResponse"
                }
              }
            }
          }
        }
      }
    },
    "/info": {
      "get": {
        "summary": "アプリケーション基本情報を取得",
        "operationId": "getWorkflowAppInfo",
        "tags": [
          "Application"
        ],
        "responses": {
          "200": {
            "description": "アプリケーションの基本情報。",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AppInfoResponse"
                }
              }
            }
          }
        }
      }
    },
    "/parameters": {
      "get": {
        "summary": "アプリケーションパラメータ情報を取得",
        "operationId": "getWorkflowAppParameters",
        "tags": [
          "Application"
        ],
        "responses": {
          "200": {
            "description": "アプリケーションパラメータ。",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkflowAppParametersResponse"
                }
              }
            }
          }
        }
      }
    },
    "/site": {
      "get": {
        "summary": "アプリケーションWebApp設定を取得",
        "operationId": "getWorkflowWebAppSettings",
        "tags": [
          "Application"
        ],
        "responses": {
          "200": {
            "description": "WebApp設定。",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkflowWebAppSettingsResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "ApiKeyAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "API_KEY",
        "description": "APIキー認証。"
      }
    },
    "responses": {
      "BadRequestWorkflow": {
        "description": "ワークフロー操作の不正なリクエスト。可能なエラーコード: invalid_param, app_unavailable, provider_not_initialize, provider_quota_exceeded, model_currently_not_support, workflow_request_error。",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            }
          }
        }
      },
      "BadRequestFile": {
        "description": "ファイル操作の不正なリクエスト。",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            }
          }
        }
      },
      "FileTooLarge": {
        "description": "ファイルが大きすぎます。",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            }
          }
        }
      },
      "UnsupportedFileTypeFile": {
        "description": "アップロードでサポートされていないファイルタイプです。",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            }
          }
        }
      },
      "S3ErrorFile": {
        "description": "S3ストレージエラー。",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            }
          }
        }
      },
      "InternalServerError": {
        "description": "内部サーバーエラー。",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            }
          }
        }
      },
      "SuccessResult": {
        "description": "操作が成功しました。",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "result": {
                  "type": "string",
                  "example": "success"
                }
              }
            }
          }
        }
      }
    },
    "schemas": {
      "WorkflowExecutionRequest": {
        "type": "object",
        "required": [
          "inputs",
          "response_mode",
          "user"
        ],
        "properties": {
          "inputs": {
            "type": "object",
            "description": "ワークフロー変数のキー/値ペア。ファイル配列タイプの変数の値はInputFileObjectWorkflowのリストである必要があります。",
            "additionalProperties": {
              "oneOf": [
                {
                  "type": "string"
                },
                {
                  "type": "number"
                },
                {
                  "type": "boolean"
                },
                {
                  "type": "object"
                },
                {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/InputFileObjectWorkflow"
                  }
                }
              ]
            },
            "example": {
              "user_query": "Translate this for me.",
              "target_language": "French"
            }
          },
          "response_mode": {
            "type": "string",
            "enum": [
              "streaming",
              "blocking"
            ],
            "description": "レスポンスモード。blockingの場合、Cloudflareのタイムアウトは100秒です。"
          },
          "user": {
            "type": "string",
            "description": "ユーザー識別子。"
          }
        }
      },
      "InputFileObjectWorkflow": {
        "type": "object",
        "required": [
          "type",
          "transfer_method"
        ],
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "document",
              "image",
              "audio",
              "video",
              "custom"
            ],
            "description": "ファイルのタイプ。"
          },
          "transfer_method": {
            "type": "string",
            "enum": [
              "remote_url",
              "local_file"
            ],
            "description": "転送方法。画像URLの場合は`remote_url`、ファイルアップロードの場合は`local_file`。"
          },
          "url": {
            "type": "string",
            "format": "url",
            "description": "画像URL（転送方法が`remote_url`の場合）"
          },
          "upload_file_id": {
            "type": "string",
            "description": "アップロードされたファイルID。事前にファイルアップロードAPIを通じてアップロードして取得する必要があります（転送方法が`local_file`の場合）"
          }
        },
        "anyOf": [
          {
            "properties": {
              "transfer_method": {
                "enum": [
                  "remote_url"
                ]
              },
              "url": {
                "type": "string",
                "format": "url"
              }
            },
            "required": [
              "url"
            ],
            "not": {
              "required": [
                "upload_file_id"
              ]
            }
          },
          {
            "properties": {
              "transfer_method": {
                "enum": [
                  "local_file"
                ]
              },
              "upload_file_id": {
                "type": "string"
              }
            },
            "required": [
              "upload_file_id"
            ],
            "not": {
              "required": [
                "url"
              ]
            }
          }
        ]
      },
      "WorkflowCompletionResponse": {
        "type": "object",
        "description": "blockingモードのワークフロー実行に対するレスポンス。",
        "properties": {
          "workflow_run_id": {
            "type": "string",
            "format": "uuid"
          },
          "task_id": {
            "type": "string",
            "format": "uuid"
          },
          "data": {
            "$ref": "#/components/schemas/WorkflowFinishedData"
          }
        }
      },
      "ChunkWorkflowEvent": {
        "type": "object",
        "required": [
          "event"
        ],
        "properties": {
          "event": {
            "type": "string",
            "enum": [
              "workflow_started",
              "node_started",
              "text_chunk",
              "node_finished",
              "workflow_finished",
              "tts_message",
              "tts_message_end",
              "ping"
            ]
          }
        },
        "discriminator": {
          "propertyName": "event",
          "mapping": {
            "workflow_started": "#/components/schemas/StreamEventWfWorkflowStarted",
            "node_started": "#/components/schemas/StreamEventWfNodeStarted",
            "text_chunk": "#/components/schemas/StreamEventWfTextChunk",
            "node_finished": "#/components/schemas/StreamEventWfNodeFinished",
            "workflow_finished": "#/components/schemas/StreamEventWfWorkflowFinished",
            "tts_message": "#/components/schemas/StreamEventWfTtsMessage",
            "tts_message_end": "#/components/schemas/StreamEventWfTtsMessageEnd",
            "ping": "#/components/schemas/StreamEventWfPing"
          }
        }
      },
      "StreamEventBaseWf": {
        "type": "object",
        "properties": {
          "task_id": {
            "type": "string",
            "format": "uuid"
          },
          "workflow_run_id": {
            "type": "string",
            "format": "uuid"
          }
        }
      },
      "StreamEventWfWorkflowStarted": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ChunkWorkflowEvent"
          },
          {
            "$ref": "#/components/schemas/StreamEventBaseWf"
          },
          {
            "type": "object",
            "required": [
              "data"
            ],
            "properties": {
              "data": {
                "$ref": "#/components/schemas/WorkflowStartedData"
              }
            }
          }
        ]
      },
      "WorkflowStartedData": {
        "type": "object",
        "required": [
          "id",
          "workflow_id",
          "sequence_number",
          "created_at"
        ],
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "workflow_id": {
            "type": "string",
            "format": "uuid"
          },
          "sequence_number": {
            "type": "integer"
          },
          "created_at": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "StreamEventWfNodeStarted": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ChunkWorkflowEvent"
          },
          {
            "$ref": "#/components/schemas/StreamEventBaseWf"
          },
          {
            "type": "object",
            "required": [
              "data"
            ],
            "properties": {
              "data": {
                "$ref": "#/components/schemas/NodeStartedData"
              }
            }
          }
        ]
      },
      "NodeStartedData": {
        "type": "object",
        "required": [
          "id",
          "node_id",
          "node_type",
          "title",
          "index",
          "created_at"
        ],
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "node_id": {
            "type": "string",
            "format": "uuid"
          },
          "node_type": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "index": {
            "type": "integer"
          },
          "predecessor_node_id": {
            "type": "string",
            "format": "uuid",
            "nullable": true
          },
          "inputs": {
            "type": "object",
            "additionalProperties": true
          },
          "created_at": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "StreamEventWfTextChunk": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ChunkWorkflowEvent"
          },
          {
            "$ref": "#/components/schemas/StreamEventBaseWf"
          },
          {
            "type": "object",
            "required": [
              "data"
            ],
            "properties": {
              "data": {
                "$ref": "#/components/schemas/TextChunkData"
              }
            }
          }
        ]
      },
      "TextChunkData": {
        "type": "object",
        "required": [
          "text",
          "from_variable_selector"
        ],
        "properties": {
          "text": {
            "type": "string"
          },
          "from_variable_selector": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "テキストソースパス。"
          }
        }
      },
      "StreamEventWfNodeFinished": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ChunkWorkflowEvent"
          },
          {
            "$ref": "#/components/schemas/StreamEventBaseWf"
          },
          {
            "type": "object",
            "required": [
              "data"
            ],
            "properties": {
              "data": {
                "$ref": "#/components/schemas/NodeFinishedData"
              }
            }
          }
        ]
      },
      "NodeFinishedData": {
        "type": "object",
        "required": [
          "id",
          "node_id",
          "node_type",
          "title",
          "index",
          "status",
          "created_at"
        ],
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "node_id": {
            "type": "string",
            "format": "uuid"
          },
          "node_type": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "index": {
            "type": "integer"
          },
          "predecessor_node_id": {
            "type": "string",
            "format": "uuid",
            "nullable": true
          },
          "inputs": {
            "type": "object",
            "additionalProperties": true,
            "nullable": true
          },
          "process_data": {
            "type": "object",
            "additionalProperties": true,
            "nullable": true
          },
          "outputs": {
            "type": "object",
            "additionalProperties": true,
            "nullable": true
          },
          "status": {
            "type": "string",
            "enum": [
              "running",
              "succeeded",
              "failed",
              "stopped"
            ]
          },
          "error": {
            "type": "string",
            "nullable": true
          },
          "elapsed_time": {
            "type": "number",
            "format": "float",
            "nullable": true
          },
          "execution_metadata": {
            "$ref": "#/components/schemas/NodeExecutionMetadata",
            "nullable": true
          },
          "created_at": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "NodeExecutionMetadata": {
        "type": "object",
        "properties": {
          "total_tokens": {
            "type": "integer",
            "nullable": true
          },
          "total_price": {
            "type": "number",
            "format": "float",
            "nullable": true
          },
          "currency": {
            "type": "string",
            "nullable": true,
            "example": "USD"
          }
        }
      },
      "StreamEventWfWorkflowFinished": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ChunkWorkflowEvent"
          },
          {
            "$ref": "#/components/schemas/StreamEventBaseWf"
          },
          {
            "type": "object",
            "required": [
              "data"
            ],
            "properties": {
              "data": {
                "$ref": "#/components/schemas/WorkflowFinishedData"
              }
            }
          }
        ]
      },
      "WorkflowFinishedData": {
        "type": "object",
        "required": [
          "id",
          "workflow_id",
          "status",
          "created_at",
          "finished_at"
        ],
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "workflow_id": {
            "type": "string",
            "format": "uuid"
          },
          "status": {
            "type": "string",
            "enum": [
              "running",
              "succeeded",
              "failed",
              "stopped"
            ]
          },
          "outputs": {
            "type": "object",
            "additionalProperties": true,
            "nullable": true
          },
          "error": {
            "type": "string",
            "nullable": true
          },
          "elapsed_time": {
            "type": "number",
            "format": "float",
            "nullable": true
          },
          "total_tokens": {
            "type": "integer",
            "nullable": true
          },
          "total_steps": {
            "type": "integer",
            "default": 0
          },
          "created_at": {
            "type": "integer",
            "format": "int64"
          },
          "finished_at": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "StreamEventWfTtsMessage": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ChunkWorkflowEvent"
          },
          {
            "$ref": "#/components/schemas/StreamEventBaseWf"
          },
          {
            "type": "object",
            "required": [
              "audio",
              "message_id",
              "created_at"
            ],
            "properties": {
              "audio": {
                "type": "string",
                "format": "byte"
              },
              "message_id": {
                "type": "string",
                "format": "uuid"
              },
              "created_at": {
                "type": "integer",
                "format": "int64"
              }
            }
          }
        ]
      },
      "StreamEventWfTtsMessageEnd": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ChunkWorkflowEvent"
          },
          {
            "$ref": "#/components/schemas/StreamEventBaseWf"
          },
          {
            "type": "object",
            "required": [
              "audio",
              "message_id",
              "created_at"
            ],
            "properties": {
              "audio": {
                "type": "string"
              },
              "message_id": {
                "type": "string",
                "format": "uuid"
              },
              "created_at": {
                "type": "integer",
                "format": "int64"
              }
            }
          }
        ]
      },
      "StreamEventWfPing": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ChunkWorkflowEvent"
          },
          {
            "type": "object"
          }
        ]
      },
      "WorkflowRunDetailResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "workflow_id": {
            "type": "string",
            "format": "uuid"
          },
          "status": {
            "type": "string",
            "enum": [
              "running",
              "succeeded",
              "failed",
              "stopped"
            ]
          },
          "inputs": {
            "type": "string",
            "description": "入力内容のJSON文字列。"
          },
          "outputs": {
            "type": "object",
            "additionalProperties": true,
            "nullable": true,
            "description": "出力内容のJSONオブジェクト。"
          },
          "error": {
            "type": "string",
            "nullable": true
          },
          "total_steps": {
            "type": "integer"
          },
          "total_tokens": {
            "type": "integer"
          },
          "created_at": {
            "type": "integer",
            "format": "int64"
          },
          "finished_at": {
            "type": "integer",
            "format": "int64",
            "nullable": true
          },
          "elapsed_time": {
            "type": "number",
            "format": "float",
            "nullable": true
          }
        }
      },
      "FileUploadResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "size": {
            "type": "integer"
          },
          "extension": {
            "type": "string"
          },
          "mime_type": {
            "type": "string"
          },
          "created_by": {
            "type": "string",
            "format": "uuid"
          },
          "created_at": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "WorkflowLogsResponse": {
        "type": "object",
        "properties": {
          "page": {
            "type": "integer"
          },
          "limit": {
            "type": "integer"
          },
          "total": {
            "type": "integer"
          },
          "has_more": {
            "type": "boolean"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/WorkflowLogItem"
            }
          }
        }
      },
      "WorkflowLogItem": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "workflow_run": {
            "$ref": "#/components/schemas/WorkflowRunSummary"
          },
          "created_from": {
            "type": "string"
          },
          "created_by_role": {
            "type": "string"
          },
          "created_by_account": {
            "type": "string",
            "format": "uuid",
            "nullable": true
          },
          "created_by_end_user": {
            "$ref": "#/components/schemas/EndUserSummary"
          },
          "created_at": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "WorkflowRunSummary": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "version": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": [
              "running",
              "succeeded",
              "failed",
              "stopped"
            ]
          },
          "error": {
            "type": "string",
            "nullable": true
          },
          "elapsed_time": {
            "type": "number",
            "format": "float"
          },
          "total_tokens": {
            "type": "integer"
          },
          "total_steps": {
            "type": "integer"
          },
          "created_at": {
            "type": "integer",
            "format": "int64"
          },
          "finished_at": {
            "type": "integer",
            "format": "int64",
            "nullable": true
          }
        }
      },
      "EndUserSummary": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "type": {
            "type": "string"
          },
          "is_anonymous": {
            "type": "boolean"
          },
          "session_id": {
            "type": "string"
          }
        }
      },
      "AppInfoResponse": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "WorkflowAppParametersResponse": {
        "type": "object",
        "properties": {
          "user_input_form": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/UserInputFormItem"
            }
          },
          "file_upload": {
            "type": "object",
            "properties": {
              "image": {
                "type": "object",
                "properties": {
                  "enabled": {
                    "type": "boolean"
                  },
                  "number_limits": {
                    "type": "integer"
                  },
                  "detail": {
                    "type": "string"
                  },
                  "transfer_methods": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "enum": [
                        "remote_url",
                        "local_file"
                      ]
                    }
                  }
                }
              }
            }
          },
          "system_parameters": {
            "type": "object",
            "properties": {
              "file_size_limit": {
                "type": "integer"
              },
              "image_file_size_limit": {
                "type": "integer"
              },
              "audio_file_size_limit": {
                "type": "integer"
              },
              "video_file_size_limit": {
                "type": "integer"
              }
            }
          }
        }
      },
      "UserInputFormItem": {
        "type": "object",
        "oneOf": [
          {
            "$ref": "#/components/schemas/TextInputControlWrapper"
          },
          {
            "$ref": "#/components/schemas/ParagraphControlWrapper"
          },
          {
            "$ref": "#/components/schemas/SelectControlWrapper"
          }
        ]
      },
      "TextInputControlWrapper": {
        "type": "object",
        "properties": {
          "text-input": {
            "$ref": "#/components/schemas/TextInputControl"
          }
        },
        "required": [
          "text-input"
        ]
      },
      "ParagraphControlWrapper": {
        "type": "object",
        "properties": {
          "paragraph": {
            "$ref": "#/components/schemas/ParagraphControl"
          }
        },
        "required": [
          "paragraph"
        ]
      },
      "SelectControlWrapper": {
        "type": "object",
        "properties": {
          "select": {
            "$ref": "#/components/schemas/SelectControl"
          }
        },
        "required": [
          "select"
        ]
      },
      "TextInputControl": {
        "type": "object",
        "required": [
          "label",
          "variable",
          "required"
        ],
        "properties": {
          "label": {
            "type": "string"
          },
          "variable": {
            "type": "string"
          },
          "required": {
            "type": "boolean"
          },
          "default": {
            "type": "string"
          }
        }
      },
      "ParagraphControl": {
        "type": "object",
        "required": [
          "label",
          "variable",
          "required"
        ],
        "properties": {
          "label": {
            "type": "string"
          },
          "variable": {
            "type": "string"
          },
          "required": {
            "type": "boolean"
          },
          "default": {
            "type": "string"
          }
        }
      },
      "SelectControl": {
        "type": "object",
        "required": [
          "label",
          "variable",
          "required",
          "options"
        ],
        "properties": {
          "label": {
            "type": "string"
          },
          "variable": {
            "type": "string"
          },
          "required": {
            "type": "boolean"
          },
          "default": {
            "type": "string"
          },
          "options": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "WorkflowWebAppSettingsResponse": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string"
          },
          "icon_type": {
            "type": "string",
            "enum": [
              "emoji",
              "image"
            ]
          },
          "icon": {
            "type": "string"
          },
          "icon_background": {
            "type": "string"
          },
          "icon_url": {
            "type": "string",
            "format": "url",
            "nullable": true
          },
          "description": {
            "type": "string"
          },
          "copyright": {
            "type": "string"
          },
          "privacy_policy": {
            "type": "string"
          },
          "custom_disclaimer": {
            "type": "string"
          },
          "default_language": {
            "type": "string"
          },
          "show_workflow_steps": {
            "type": "boolean"
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "integer",
            "nullable": true
          },
          "code": {
            "type": "string",
            "nullable": true
          },
          "message": {
            "type": "string"
          }
        }
      }
    }
  },
  "tags": [
    {
      "name": "Workflow Execution",
      "description": "ワークフローの実行と管理に関連する操作。"
    },
    {
      "name": "Files",
      "description": "ワークフロー固有のファイルアップロードとプレビュー操作。"
    },
    {
      "name": "Application",
      "description": "ワークフローアプリのアプリケーション設定と情報。"
    }
  ]
}