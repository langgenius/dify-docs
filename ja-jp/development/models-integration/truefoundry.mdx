---
title: "TrueFoundry AI Gateway との統合"
---

TrueFoundryは、エンタープライズ対応の[AI Gateway](https://www.truefoundry.com/ai-gateway)を提供し、Difyとシームレスに統合して、コスト追跡、セキュリティガードレール、アクセス制御を含むエンタープライズグレードのAI機能を提供します。

TrueFoundryのAI Gatewayは、すべてのLLM呼び出しをGatewayを通じてルーティングし、AIアプリケーションが安全で準拠しており、コスト効率的であることを保証します。

## 前提条件

DifyをTrueFoundryと統合する前に、以下を確保してください：

1. **TrueFoundryアカウント**: [Truefoundryアカウント](https://www.truefoundry.com/register)を作成し、[Gateway クイックスタートガイド](https://docs.truefoundry.com/gateway/quick-start)の指示に従ってください
2. **Difyのインストール**: [クラウド版](https://dify.ai/)または[セルフホスト展開](https://github.com/langgenius/dify)のDockerを使用してDifyをセットアップしてください

## 統合手順

このガイドでは、Difyがインストールされて実行されており、TrueFoundry AI GatewayのベースURLと認証トークンを取得していることを前提としています。


### ステップ1: Difyモデルプロバイダー設定へのアクセス

1. Difyワークスペース（クラウドまたはセルフホスト）にログインします。

2. **設定**に移動し、**モデルプロバイダー**に進みます：

<Frame>
  <img src="/images/model provider select diffy.png" />
</Frame>

### ステップ2: OpenAI-API-Compatible プロバイダーのインストール

1. モデルプロバイダーセクションで、**OpenAI-API-compatible**を探し、**インストール**をクリックします。

2. TrueFoundryの詳細でOpenAI-API-compatibleプロバイダーを設定します：

<Frame>
  <img src="/images/open api diffy.png" />
</Frame>

以下の設定を入力してください：
- **モデル名**: TrueFoundryモデルIDを入力します（例：`openai-main/gpt-4o`）
- **モデル表示名**: 表示名を入力します（例：`Gpt-4o`）
- **APIキー**: TrueFoundry APIキーを入力します
- **APIエンドポイントURL**: TrueFoundry GatewayベースURLを入力します（例：`https://internal.devtest.truefoundry.tech/api/llm/api/inference/openai`）
- **APIエンドポイント用モデル名**: エンドポイントモデル名を入力します（例：`openai-main/gpt-4o`）

<Frame>
  <img src="/images/new-code-snippet.png" />
</Frame>


### ステップ3: 設定の保存とテスト

1. **保存**をクリックして、Difyで設定を適用します。

2. 統合をテストするために新しいアプリケーションまたはワークフローを作成します：

3. DifyがTrueFoundryのAI Gatewayと正常に通信していることを確認するために、シンプルなLLMワークフローを作成して統合をテストします。

<Frame>
  <img src="/images/result diffy.png" />
</Frame>

これで、DifyワークスペースはTrueFoundryのAI Gatewayと統合され、AIアプリケーション、ワークフロー、エージェントの構築の準備が整いました。

