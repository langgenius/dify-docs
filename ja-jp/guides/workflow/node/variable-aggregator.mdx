---
title: 変数集約
---

### 定義

マルチブランチの変数を一つの変数に集約し、ダウンズトリームノードの統一設定を実現します。

変数集約ノード（元変数割り当てノード）はワークフローの重要なノードであり、異なるブランチの出力結果を統合し、どのブランチが実行されても、その結果を一つの統一された変数を通じて参照およびアクセスできるようにします。これはマルチブランチの状況で非常に有用で、異なるブランチで同じ役割を果たす変数を一つの出力変数にマッピングし、ダウンズトリームノードでの重複定義を避けます。

***

### シナリオ

変数集約を通じて、問題分類や条件ブランチなどのマルチ出力をシングル出力に集約し、プロセスのダウンズトリームノードが使用および操作できるようにします。これによりデータフローの管理が簡素化されます。

**問題分類後のマルチ集約**

変数集約を追加しない場合、分類1と分類2のブランチは異なるナレッジベース検索を経て、ダウンズトリームの大規模言語モデルおよび直接返信ノードを繰り返し定義する必要があります。

<Frame caption="問題分類（変数集約なし）">
  <img src="https://assets-docs.dify.ai/dify-enterprise-mintlify/jp/guides/workflow/node/7a7c91663c3799ce9d056b013d5df29c.png" alt="问题分类无变量聚合的流程图" />
</Frame>

変数集約を追加することで、二つのナレッジベース検索ノードの出力を一つの変数に集約できます。

<Frame caption="問題分類後のマルチ集約">
  <img src="https://assets-docs.dify.ai/dify-enterprise-mintlify/jp/guides/workflow/node/78e088e16a409cc18552b21bec98bc01.png" alt="问题分类后添加变量聚合的流程图" />
</Frame>

**IF/ELSE 条件ブランチ後のマルチ集約**

<Frame caption="IF/ELSE 問題分類後のマルチ集約">
  <img src="https://assets-docs.dify.ai/dify-enterprise-mintlify/jp/guides/workflow/node/da33064c784fc44c19b532a6d873cfaf.png" alt="IF/ELSE 条件分支后添加变量聚合的流程图" />
</Frame>

### フォーマットに要求

変数集約器は文字列（`String`）、数値（`Number`）、ブール値（`Boolean`）、ファイル（`File`）、オブジェクト（`Object`）、および配列（`Array`）など、さまざまなデータ型の集約をサポートします。ブール値の配列（`Array[Boolean]`）もサポートされます。

**変数集約器は同一データ型の変数しか集約できません**。最初に変数集約ノードに追加された変数データ形式が `String` である場合、後続の接続では追加可能な変数が `String` タイプに自動的にフィルタリングされます。

**アグリゲートグループ**

アグリゲートグループを有効にすると、変数集約器は複数のグループの変数を集約でき、各グループ内の集約時には同一データ型が求められます。

{/*
Contributing Section
DO NOT edit this section!
It will be automatically generated by the script.
*/}

---

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/node/variable-aggregator.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?template=docs.yml)

