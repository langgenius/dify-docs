---
title: "Lesson 9: Layout Designer (Template)"
sidebarTitle: "Lesson 9: Layout Designer"
---

In Lesson 8, we successfully built a powerful Agent that can think and search. However, you might have noticed a tiny issue: even though we asked the final LLM to list the answers, sometimes the formatting can be a bit messy or inconsistent (e.g., mixing bullet points with paragraphs).

To fix this, we need a dedicated format assistant to organize the answers into a beautiful, standardized format before the final LLM writes the email.

## Template

It takes the original data (like your list of answers), follows a strict design template/standards you provide, and generates a perfectly formatted block of text, ensuring consistency every single time.

## Hands-On 1: Polish the Email Layout

<Steps>
  <Step title="Add the Node">
    Add Template node between Iteration and LLM node.

    <Frame>
      <img src="/images/difyworkflow101-lesson09-addthenode.png" alt="Add the Node" />
    </Frame>
  </Step>

  <Step title="Set up the Inputs">
    We need to let the designer understand the format rules.

    1. Click the **Template** node.
    2. Go **Input Variables** sessions. Choose `Iteration/{x}output Array[String]` and name it **answers**.

    <Frame>
      <img src="/images/difyworkflow101-lesson09-setinputs.png" alt="Set Inputs" />
    </Frame>

    3. In the code box, we use a tool called **Jinja2**

    **What is Jinja2?**

    In simple terms, Jinja2 is a tool that allows you to format variables (like your list of answers) into a text template exactly how you want. 
    
    It uses simple symbols to mark where variables go and perform basic logic. With it, we can turn a raw list of data into a neat, standardized text block.

    You can copy and paste the code below into the code box. This code processes every item in your answers list one by one, adding a dash `-` in front of each, to create a clean bulleted list.

    ```jinja2
    {% for answer in answers %}
    - {{ answer }}
    {% endfor %}
    ```
  </Step>

  <Step title="Update the Prompt in LLM">
    Click the final LLM node, and update the prompt in the system. Feel free to refer or edit the one below.

    ```text
    You are a professional Customer Service Manager.

    Please generate a clear and complete email reply for `User Input/{x}customer_name` using the following prepared answers: `Template/{x}output`.
    Please start with a friendly greeting and sign off as Anne.
    ```

    <Frame>
      <img src="/images/difyworkflow101-lesson09-updateprompt.png" alt="Update Prompt" />
    </Frame>
  </Step>
</Steps>

Here's comes the workflow.

<Frame>
  <img src="/images/difyworkflow101-lesson09-finalworkflow.png" alt="Final Workflow" />
</Frame>

Click **Test Run**. Ask multiple questions in one email. Notice how the middle section of the reply is now a perfectly formatted bulleted list in a professional tone.
  

## Mini Challenge

1. How would you change the Jinja2 code to make a numbered list (1. Answer, 2. Answer) instead of bullet points?

    <Tip>
      Check the [Template Designer Documentation](https://jinja.palletsprojects.com/en/stable/templates/) or ask an LLM about it.
    </Tip>

2. What else can Template node do?