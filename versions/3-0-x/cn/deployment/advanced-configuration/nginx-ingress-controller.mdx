---
title: Nginx Ingress æ§åˆ¶å™¨
version: 'ç®€ä½“ä¸­æ–‡'
---

## å¦‚ä½•å®‰è£… Nginx Ingress Controller

ä½ å¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œåœ¨ Kubernetes é›†ç¾¤ä¸­å®‰è£… Nginx Ingress Controllerï¼š

```bash
kubectl apply -f ./ingress-nginx-controller-v1.12.1.yaml
```

> ğŸ‘‰ <a href="https://assets-docs.dify.ai/2025/07/727045c765d5052ef3cc2f4b15aaa492.yaml" download="ingress-nginx-controller-v1.12.1.yaml">ç‚¹å‡»æ­¤å¤„</a> ä¸‹è½½ `ingress-nginx-controller-v1.12.1.yaml` æ–‡ä»¶ã€‚


## å¦‚ä½•é…ç½® Nginx Ingress Controller

å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Nginx Ingress Controllerï¼Œè¯·ç¡®ä¿åœ¨ `annotations` å­—æ®µä¸­è®¾ç½®æ–‡ä»¶ä¸Šä¼ å¤§å°é™åˆ¶ï¼š

```yaml
ingress:
  enabled: true
  className: "nginx"
  annotations: {
    # è®¾ç½®æ–‡ä»¶ä¸Šä¼ å¤§å°é™åˆ¶
    nginx.ingress.kubernetes.io/proxy-body-size: "15m"
  }
  ... ...
```

---

## å¦‚ä½•è®¿é—® Dify Enterprise

å®Œæˆ Ingress Controller å®‰è£…åï¼Œè¯·å…ˆè·å– Ingress Controller çš„å¤–éƒ¨ IPï¼š

```bash
kubectl get svc -n ingress-nginx
```

ç„¶åï¼Œå°†è·å–åˆ°çš„å¤–éƒ¨ IP æ·»åŠ åˆ°æœ¬åœ°æœºå™¨çš„ `/etc/hosts` æ–‡ä»¶ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```bash
4.152.1.216 console.dify.local
4.152.1.216 app.dify.local
4.152.1.216 api.dify.local
4.152.1.216 upload.dify.local
4.152.1.216 enterprise.dify.local
```

## å¦‚æœä½ ä½¿ç”¨å…¶ä»– Ingress Controllers åº”è¯¥æ€ä¹ˆåŠï¼Ÿ
- ä¸€èˆ¬æ¥è¯´ï¼Œäº‘æœåŠ¡æä¾›å•†ä¼šæœ‰è‡ªå·±çš„ Ingress Controllerã€‚ä½ å¯ä»¥ä½¿ç”¨äº‘æœåŠ¡æä¾›å•†çš„ Ingress Controllerã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è€ƒ [Kubernetes æ–‡æ¡£](https://kubernetes.io/docs/concepts/services-networking/ingress-controllers/)ã€‚
- `æ–‡ä»¶ä¸Šä¼ å¤§å°é™åˆ¶`ï¼šä½ å¯èƒ½éœ€è¦åœ¨ Ingress Controller é…ç½®çš„ `annotations` å­—æ®µä¸­è®¾ç½®æ–‡ä»¶ä¸Šä¼ å¤§å°é™åˆ¶ã€‚ä¾‹å¦‚ï¼Œå¯¹äº Nginx Ingress Controllerï¼Œä½ å¯ä»¥ä½¿ç”¨ `nginx.ingress.kubernetes.io/proxy-body-size: "15m"`ã€‚
- `å®¡è®¡æ—¥å¿— IP`ï¼šä½ åº”è¯¥åœ¨ Ingress Controller ä¸­é…ç½® `X-Forwarded-For` å¤´ï¼Œä»¥ä¼ é€’å®¢æˆ·ç«¯çš„çœŸå® IP åœ°å€ã€‚