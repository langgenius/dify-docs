{
  "openapi": "3.0.1",
  "info": {
    "title": "工作流应用 API",
    "description": "工作流应用提供非会话支持，适用于翻译、文章写作、摘要总结 AI 等场景。",
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "{api_base_url}",
      "description": "工作流应用 API 的基础 URL。请将 {api_base_url} 替换为实际的 API 基础 URL。",
      "variables": {
        "api_base_url": {
          "default": "https://api.dify.ai/v1",
          "description": "API 的实际基础 URL"
        }
      }
    }
  ],
  "security": [
    {
      "ApiKeyAuth": []
    }
  ],
  "paths": {
    "/workflows/run": {
      "post": {
        "summary": "执行工作流",
        "description": "执行工作流。未发布的工作流无法执行。",
        "operationId": "executeWorkflow",
        "tags": [
          "Workflow Execution"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WorkflowExecutionRequest"
              },
              "examples": {
                "basic_execution": {
                  "summary": "基础工作流执行",
                  "value": {
                    "inputs": {
                      "query": "Summarize this text: ..."
                    },
                    "response_mode": "streaming",
                    "user": "user_workflow_123"
                  }
                },
                "with_file_array_variable": {
                  "summary": "包含文件数组输入变量的示例",
                  "value": {
                    "inputs": {
                      "my_documents": [
                        {
                          "type": "document",
                          "transfer_method": "local_file",
                          "upload_file_id": "uploaded_file_id_abc"
                        },
                        {
                          "type": "image",
                          "transfer_method": "remote_url",
                          "url": "https://example.com/image.jpg"
                        }
                      ]
                    },
                    "response_mode": "blocking",
                    "user": "user_workflow_456"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "工作流执行成功。返回结构取决于 `response_mode`。\n- `blocking`：返回 `application/json` 格式的 `WorkflowCompletionResponse`。\n- `streaming`：返回 `text/event-stream` 格式的 `ChunkWorkflowEvent` 流。",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkflowCompletionResponse"
                }
              },
              "text/event-stream": {
                "schema": {
                  "type": "string",
                  "description": "服务器发送事件（Server-Sent Events）流。结构详见 `ChunkWorkflowEvent`。"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestWorkflow"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/workflows/run/{workflow_run_id}": {
      "get": {
        "summary": "获取工作流运行详情",
        "description": "根据工作流执行 ID 获取工作流任务的当前执行结果。",
        "operationId": "getWorkflowRunDetail",
        "tags": [
          "Workflow Execution"
        ],
        "parameters": [
          {
            "name": "workflow_run_id",
            "in": "path",
            "required": true,
            "description": "工作流运行 ID，可从工作流执行响应或流式事件中获取。",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功获取工作流运行详情。",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkflowRunDetailResponse"
                }
              }
            }
          },
          "404": {
            "description": "未找到工作流运行记录。"
          }
        }
      }
    },
    "/workflows/tasks/{task_id}/stop": {
      "post": {
        "summary": "停止工作流任务生成",
        "description": "停止工作流任务生成。仅在流式模式下支持。",
        "operationId": "stopWorkflowTaskGeneration",
        "tags": [
          "Workflow Execution"
        ],
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "description": "来自流式数据块的任务 ID。",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "user"
                ],
                "properties": {
                  "user": {
                    "type": "string",
                    "description": "用户标识符。"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "$ref": "#/components/responses/SuccessResult"
          }
        }
      }
    },
    "/files/upload": {
      "post": {
        "summary": "工作流文件上传",
        "description": "上传文件以在工作流中使用。支持工作流支持的任何格式。上传的文件仅供当前终端用户使用。",
        "operationId": "uploadWorkflowFile",
        "tags": [
          "Files"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "required": [
                  "file",
                  "user"
                ],
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary",
                    "description": "要上传的文件。"
                  },
                  "user": {
                    "type": "string",
                    "description": "用户标识符。"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "文件上传成功。",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FileUploadResponse"
                }
              }
            }
          },
          "201": {
            "description": "文件创建成功（备用成功状态码）。",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FileUploadResponse"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequestFile"
          },
          "413": {
            "$ref": "#/components/responses/FileTooLarge"
          },
          "415": {
            "$ref": "#/components/responses/UnsupportedFileTypeFile"
          },
          "503": {
            "$ref": "#/components/responses/S3ErrorFile"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/workflows/logs": {
      "get": {
        "summary": "获取工作流日志",
        "description": "返回工作流日志，第一页返回最新的 `{limit}` 条消息，即按倒序排列。",
        "operationId": "getWorkflowLogs",
        "tags": [
          "Workflow Execution"
        ],
        "parameters": [
          {
            "name": "keyword",
            "in": "query",
            "description": "搜索关键词。",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "status",
            "in": "query",
            "description": "按状态筛选。",
            "schema": {
              "type": "string",
              "enum": [
                "succeeded",
                "failed",
                "stopped",
                "running"
              ]
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "当前页码。",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "每页条目数。",
            "schema": {
              "type": "integer",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功获取工作流日志。",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkflowLogsResponse"
                }
              }
            }
          }
        }
      }
    },
    "/info": {
      "get": {
        "summary": "获取应用基本信息",
        "operationId": "getWorkflowAppInfo",
        "tags": [
          "Application"
        ],
        "responses": {
          "200": {
            "description": "应用基本信息。",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AppInfoResponse"
                }
              }
            }
          }
        }
      }
    },
    "/parameters": {
      "get": {
        "summary": "获取应用参数信息",
        "operationId": "getWorkflowAppParameters",
        "tags": [
          "Application"
        ],
        "responses": {
          "200": {
            "description": "应用参数。",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkflowAppParametersResponse"
                }
              }
            }
          }
        }
      }
    },
    "/site": {
      "get": {
        "summary": "获取应用 WebApp 设置",
        "operationId": "getWorkflowWebAppSettings",
        "tags": [
          "Application"
        ],
        "responses": {
          "200": {
            "description": "WebApp 设置。",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkflowWebAppSettingsResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "ApiKeyAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "API_KEY",
        "description": "API 密钥认证。"
      }
    },
    "responses": {
      "BadRequestWorkflow": {
        "description": "工作流操作请求错误。可能的错误代码：invalid_param、app_unavailable、provider_not_initialize、provider_quota_exceeded、model_currently_not_support、workflow_request_error。",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            }
          }
        }
      },
      "BadRequestFile": {
        "description": "文件操作请求错误。",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            }
          }
        }
      },
      "FileTooLarge": {
        "description": "文件过大。",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            }
          }
        }
      },
      "UnsupportedFileTypeFile": {
        "description": "不支持的上传文件类型。",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            }
          }
        }
      },
      "S3ErrorFile": {
        "description": "S3 存储错误。",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            }
          }
        }
      },
      "InternalServerError": {
        "description": "服务器内部错误。",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            }
          }
        }
      },
      "SuccessResult": {
        "description": "操作成功。",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "result": {
                  "type": "string",
                  "example": "success"
                }
              }
            }
          }
        }
      }
    },
    "schemas": {
      "WorkflowExecutionRequest": {
        "type": "object",
        "required": [
          "inputs",
          "response_mode",
          "user"
        ],
        "properties": {
          "inputs": {
            "type": "object",
            "description": "工作流变量的键/值对。文件数组类型变量的值应为 InputFileObjectWorkflow 列表。",
            "additionalProperties": {
              "oneOf": [
                {
                  "type": "string"
                },
                {
                  "type": "number"
                },
                {
                  "type": "boolean"
                },
                {
                  "type": "object"
                },
                {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/InputFileObjectWorkflow"
                  }
                }
              ]
            },
            "example": {
              "user_query": "Translate this for me.",
              "target_language": "French"
            }
          },
          "response_mode": {
            "type": "string",
            "enum": [
              "streaming",
              "blocking"
            ],
            "description": "响应模式。Cloudflare 阻塞模式超时时间为 100 秒。"
          },
          "user": {
            "type": "string",
            "description": "用户标识符。"
          }
        }
      },
      "InputFileObjectWorkflow": {
        "type": "object",
        "required": [
          "type",
          "transfer_method"
        ],
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "document",
              "image",
              "audio",
              "video",
              "custom"
            ],
            "description": "文件类型。"
          },
          "transfer_method": {
            "type": "string",
            "enum": [
              "remote_url",
              "local_file"
            ],
            "description": "传输方式，`remote_url` 用于图片 URL / `local_file` 用于文件上传"
          },
          "url": {
            "type": "string",
            "format": "url",
            "description": "图片 URL（当传输方式为 `remote_url` 时）"
          },
          "upload_file_id": {
            "type": "string",
            "description": "已上传文件的 ID，必须预先通过文件上传 API 上传获取（当传输方式为 `local_file` 时）"
          }
        },
        "anyOf": [
          {
            "properties": {
              "transfer_method": {
                "enum": [
                  "remote_url"
                ]
              },
              "url": {
                "type": "string",
                "format": "url"
              }
            },
            "required": [
              "url"
            ],
            "not": {
              "required": [
                "upload_file_id"
              ]
            }
          },
          {
            "properties": {
              "transfer_method": {
                "enum": [
                  "local_file"
                ]
              },
              "upload_file_id": {
                "type": "string"
              }
            },
            "required": [
              "upload_file_id"
            ],
            "not": {
              "required": [
                "url"
              ]
            }
          }
        ]
      },
      "WorkflowCompletionResponse": {
        "type": "object",
        "description": "阻塞模式工作流执行的响应。",
        "properties": {
          "workflow_run_id": {
            "type": "string",
            "format": "uuid"
          },
          "task_id": {
            "type": "string",
            "format": "uuid"
          },
          "data": {
            "$ref": "#/components/schemas/WorkflowFinishedData"
          }
        }
      },
      "ChunkWorkflowEvent": {
        "type": "object",
        "required": [
          "event"
        ],
        "properties": {
          "event": {
            "type": "string",
            "enum": [
              "workflow_started",
              "node_started",
              "text_chunk",
              "node_finished",
              "workflow_finished",
              "tts_message",
              "tts_message_end",
              "ping"
            ]
          }
        },
        "discriminator": {
          "propertyName": "event",
          "mapping": {
            "workflow_started": "#/components/schemas/StreamEventWfWorkflowStarted",
            "node_started": "#/components/schemas/StreamEventWfNodeStarted",
            "text_chunk": "#/components/schemas/StreamEventWfTextChunk",
            "node_finished": "#/components/schemas/StreamEventWfNodeFinished",
            "workflow_finished": "#/components/schemas/StreamEventWfWorkflowFinished",
            "tts_message": "#/components/schemas/StreamEventWfTtsMessage",
            "tts_message_end": "#/components/schemas/StreamEventWfTtsMessageEnd",
            "ping": "#/components/schemas/StreamEventWfPing"
          }
        }
      },
      "StreamEventBaseWf": {
        "type": "object",
        "properties": {
          "task_id": {
            "type": "string",
            "format": "uuid"
          },
          "workflow_run_id": {
            "type": "string",
            "format": "uuid"
          }
        }
      },
      "StreamEventWfWorkflowStarted": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ChunkWorkflowEvent"
          },
          {
            "$ref": "#/components/schemas/StreamEventBaseWf"
          },
          {
            "type": "object",
            "required": [
              "data"
            ],
            "properties": {
              "data": {
                "$ref": "#/components/schemas/WorkflowStartedData"
              }
            }
          }
        ]
      },
      "WorkflowStartedData": {
        "type": "object",
        "required": [
          "id",
          "workflow_id",
          "sequence_number",
          "created_at"
        ],
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "workflow_id": {
            "type": "string",
            "format": "uuid"
          },
          "sequence_number": {
            "type": "integer"
          },
          "created_at": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "StreamEventWfNodeStarted": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ChunkWorkflowEvent"
          },
          {
            "$ref": "#/components/schemas/StreamEventBaseWf"
          },
          {
            "type": "object",
            "required": [
              "data"
            ],
            "properties": {
              "data": {
                "$ref": "#/components/schemas/NodeStartedData"
              }
            }
          }
        ]
      },
      "NodeStartedData": {
        "type": "object",
        "required": [
          "id",
          "node_id",
          "node_type",
          "title",
          "index",
          "created_at"
        ],
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "node_id": {
            "type": "string",
            "format": "uuid"
          },
          "node_type": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "index": {
            "type": "integer"
          },
          "predecessor_node_id": {
            "type": "string",
            "format": "uuid",
            "nullable": true
          },
          "inputs": {
            "type": "object",
            "additionalProperties": true
          },
          "created_at": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "StreamEventWfTextChunk": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ChunkWorkflowEvent"
          },
          {
            "$ref": "#/components/schemas/StreamEventBaseWf"
          },
          {
            "type": "object",
            "required": [
              "data"
            ],
            "properties": {
              "data": {
                "$ref": "#/components/schemas/TextChunkData"
              }
            }
          }
        ]
      },
      "TextChunkData": {
        "type": "object",
        "required": [
          "text",
          "from_variable_selector"
        ],
        "properties": {
          "text": {
            "type": "string"
          },
          "from_variable_selector": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "文本来源路径。"
          }
        }
      },
      "StreamEventWfNodeFinished": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ChunkWorkflowEvent"
          },
          {
            "$ref": "#/components/schemas/StreamEventBaseWf"
          },
          {
            "type": "object",
            "required": [
              "data"
            ],
            "properties": {
              "data": {
                "$ref": "#/components/schemas/NodeFinishedData"
              }
            }
          }
        ]
      },
      "NodeFinishedData": {
        "type": "object",
        "required": [
          "id",
          "node_id",
          "node_type",
          "title",
          "index",
          "status",
          "created_at"
        ],
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "node_id": {
            "type": "string",
            "format": "uuid"
          },
          "node_type": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "index": {
            "type": "integer"
          },
          "predecessor_node_id": {
            "type": "string",
            "format": "uuid",
            "nullable": true
          },
          "inputs": {
            "type": "object",
            "additionalProperties": true,
            "nullable": true
          },
          "process_data": {
            "type": "object",
            "additionalProperties": true,
            "nullable": true
          },
          "outputs": {
            "type": "object",
            "additionalProperties": true,
            "nullable": true
          },
          "status": {
            "type": "string",
            "enum": [
              "running",
              "succeeded",
              "failed",
              "stopped"
            ]
          },
          "error": {
            "type": "string",
            "nullable": true
          },
          "elapsed_time": {
            "type": "number",
            "format": "float",
            "nullable": true
          },
          "execution_metadata": {
            "$ref": "#/components/schemas/NodeExecutionMetadata",
            "nullable": true
          },
          "created_at": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "NodeExecutionMetadata": {
        "type": "object",
        "properties": {
          "total_tokens": {
            "type": "integer",
            "nullable": true
          },
          "total_price": {
            "type": "number",
            "format": "float",
            "nullable": true
          },
          "currency": {
            "type": "string",
            "nullable": true,
            "example": "USD"
          }
        }
      },
      "StreamEventWfWorkflowFinished": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ChunkWorkflowEvent"
          },
          {
            "$ref": "#/components/schemas/StreamEventBaseWf"
          },
          {
            "type": "object",
            "required": [
              "data"
            ],
            "properties": {
              "data": {
                "$ref": "#/components/schemas/WorkflowFinishedData"
              }
            }
          }
        ]
      },
      "WorkflowFinishedData": {
        "type": "object",
        "required": [
          "id",
          "workflow_id",
          "status",
          "created_at",
          "finished_at"
        ],
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "workflow_id": {
            "type": "string",
            "format": "uuid"
          },
          "status": {
            "type": "string",
            "enum": [
              "running",
              "succeeded",
              "failed",
              "stopped"
            ]
          },
          "outputs": {
            "type": "object",
            "additionalProperties": true,
            "nullable": true
          },
          "error": {
            "type": "string",
            "nullable": true
          },
          "elapsed_time": {
            "type": "number",
            "format": "float",
            "nullable": true
          },
          "total_tokens": {
            "type": "integer",
            "nullable": true
          },
          "total_steps": {
            "type": "integer",
            "default": 0
          },
          "created_at": {
            "type": "integer",
            "format": "int64"
          },
          "finished_at": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "StreamEventWfTtsMessage": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ChunkWorkflowEvent"
          },
          {
            "$ref": "#/components/schemas/StreamEventBaseWf"
          },
          {
            "type": "object",
            "required": [
              "audio",
              "message_id",
              "created_at"
            ],
            "properties": {
              "audio": {
                "type": "string",
                "format": "byte"
              },
              "message_id": {
                "type": "string",
                "format": "uuid"
              },
              "created_at": {
                "type": "integer",
                "format": "int64"
              }
            }
          }
        ]
      },
      "StreamEventWfTtsMessageEnd": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ChunkWorkflowEvent"
          },
          {
            "$ref": "#/components/schemas/StreamEventBaseWf"
          },
          {
            "type": "object",
            "required": [
              "audio",
              "message_id",
              "created_at"
            ],
            "properties": {
              "audio": {
                "type": "string"
              },
              "message_id": {
                "type": "string",
                "format": "uuid"
              },
              "created_at": {
                "type": "integer",
                "format": "int64"
              }
            }
          }
        ]
      },
      "StreamEventWfPing": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ChunkWorkflowEvent"
          },
          {
            "type": "object"
          }
        ]
      },
      "WorkflowRunDetailResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "workflow_id": {
            "type": "string",
            "format": "uuid"
          },
          "status": {
            "type": "string",
            "enum": [
              "running",
              "succeeded",
              "failed",
              "stopped"
            ]
          },
          "inputs": {
            "type": "string",
            "description": "输入内容的 JSON 字符串。"
          },
          "outputs": {
            "type": "object",
            "additionalProperties": true,
            "nullable": true,
            "description": "输出内容的 JSON 对象。"
          },
          "error": {
            "type": "string",
            "nullable": true
          },
          "total_steps": {
            "type": "integer"
          },
          "total_tokens": {
            "type": "integer"
          },
          "created_at": {
            "type": "integer",
            "format": "int64"
          },
          "finished_at": {
            "type": "integer",
            "format": "int64",
            "nullable": true
          },
          "elapsed_time": {
            "type": "number",
            "format": "float",
            "nullable": true
          }
        }
      },
      "FileUploadResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "size": {
            "type": "integer"
          },
          "extension": {
            "type": "string"
          },
          "mime_type": {
            "type": "string"
          },
          "created_by": {
            "type": "string",
            "format": "uuid"
          },
          "created_at": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "WorkflowLogsResponse": {
        "type": "object",
        "properties": {
          "page": {
            "type": "integer"
          },
          "limit": {
            "type": "integer"
          },
          "total": {
            "type": "integer"
          },
          "has_more": {
            "type": "boolean"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/WorkflowLogItem"
            }
          }
        }
      },
      "WorkflowLogItem": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "workflow_run": {
            "$ref": "#/components/schemas/WorkflowRunSummary"
          },
          "created_from": {
            "type": "string"
          },
          "created_by_role": {
            "type": "string"
          },
          "created_by_account": {
            "type": "string",
            "format": "uuid",
            "nullable": true
          },
          "created_by_end_user": {
            "$ref": "#/components/schemas/EndUserSummary"
          },
          "created_at": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "WorkflowRunSummary": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "version": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": [
              "running",
              "succeeded",
              "failed",
              "stopped"
            ]
          },
          "error": {
            "type": "string",
            "nullable": true
          },
          "elapsed_time": {
            "type": "number",
            "format": "float"
          },
          "total_tokens": {
            "type": "integer"
          },
          "total_steps": {
            "type": "integer"
          },
          "created_at": {
            "type": "integer",
            "format": "int64"
          },
          "finished_at": {
            "type": "integer",
            "format": "int64",
            "nullable": true
          }
        }
      },
      "EndUserSummary": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "type": {
            "type": "string"
          },
          "is_anonymous": {
            "type": "boolean"
          },
          "session_id": {
            "type": "string"
          }
        }
      },
      "AppInfoResponse": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "WorkflowAppParametersResponse": {
        "type": "object",
        "properties": {
          "user_input_form": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/UserInputFormItem"
            }
          },
          "file_upload": {
            "type": "object",
            "properties": {
              "image": {
                "type": "object",
                "properties": {
                  "enabled": {
                    "type": "boolean"
                  },
                  "number_limits": {
                    "type": "integer"
                  },
                  "detail": {
                    "type": "string"
                  },
                  "transfer_methods": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "enum": [
                        "remote_url",
                        "local_file"
                      ]
                    }
                  }
                }
              }
            }
          },
          "system_parameters": {
            "type": "object",
            "properties": {
              "file_size_limit": {
                "type": "integer"
              },
              "image_file_size_limit": {
                "type": "integer"
              },
              "audio_file_size_limit": {
                "type": "integer"
              },
              "video_file_size_limit": {
                "type": "integer"
              }
            }
          }
        }
      },
      "UserInputFormItem": {
        "type": "object",
        "oneOf": [
          {
            "$ref": "#/components/schemas/TextInputControlWrapper"
          },
          {
            "$ref": "#/components/schemas/ParagraphControlWrapper"
          },
          {
            "$ref": "#/components/schemas/SelectControlWrapper"
          }
        ]
      },
      "TextInputControlWrapper": {
        "type": "object",
        "properties": {
          "text-input": {
            "$ref": "#/components/schemas/TextInputControl"
          }
        },
        "required": [
          "text-input"
        ]
      },
      "ParagraphControlWrapper": {
        "type": "object",
        "properties": {
          "paragraph": {
            "$ref": "#/components/schemas/ParagraphControl"
          }
        },
        "required": [
          "paragraph"
        ]
      },
      "SelectControlWrapper": {
        "type": "object",
        "properties": {
          "select": {
            "$ref": "#/components/schemas/SelectControl"
          }
        },
        "required": [
          "select"
        ]
      },
      "TextInputControl": {
        "type": "object",
        "required": [
          "label",
          "variable",
          "required"
        ],
        "properties": {
          "label": {
            "type": "string"
          },
          "variable": {
            "type": "string"
          },
          "required": {
            "type": "boolean"
          },
          "default": {
            "type": "string"
          }
        }
      },
      "ParagraphControl": {
        "type": "object",
        "required": [
          "label",
          "variable",
          "required"
        ],
        "properties": {
          "label": {
            "type": "string"
          },
          "variable": {
            "type": "string"
          },
          "required": {
            "type": "boolean"
          },
          "default": {
            "type": "string"
          }
        }
      },
      "SelectControl": {
        "type": "object",
        "required": [
          "label",
          "variable",
          "required",
          "options"
        ],
        "properties": {
          "label": {
            "type": "string"
          },
          "variable": {
            "type": "string"
          },
          "required": {
            "type": "boolean"
          },
          "default": {
            "type": "string"
          },
          "options": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "WorkflowWebAppSettingsResponse": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string"
          },
          "icon_type": {
            "type": "string",
            "enum": [
              "emoji",
              "image"
            ]
          },
          "icon": {
            "type": "string"
          },
          "icon_background": {
            "type": "string"
          },
          "icon_url": {
            "type": "string",
            "format": "url",
            "nullable": true
          },
          "description": {
            "type": "string"
          },
          "copyright": {
            "type": "string"
          },
          "privacy_policy": {
            "type": "string"
          },
          "custom_disclaimer": {
            "type": "string"
          },
          "default_language": {
            "type": "string"
          },
          "show_workflow_steps": {
            "type": "boolean"
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "integer",
            "nullable": true
          },
          "code": {
            "type": "string",
            "nullable": true
          },
          "message": {
            "type": "string"
          }
        }
      }
    }
  },
  "tags": [
    {
      "name": "Workflow Execution",
      "description": "与执行和管理工作流相关的操作。"
    },
    {
      "name": "Files",
      "description": "工作流专用的文件上传和预览操作。"
    },
    {
      "name": "Application",
      "description": "工作流应用的应用设置和信息。"
    }
  ]
}