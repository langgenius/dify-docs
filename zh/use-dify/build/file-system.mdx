---
title: 文件系统
icon: "folder-tree"
keyword: skills, skill
---

<Note> ⚠️ 本文档由 AI 自动翻译。如有任何不准确之处，请参考[英文原版](/en/use-dify/build/file-system)。</Note>

每个使用[沙盒运行时](/zh/use-dify/build/runtime#沙盒运行时)的应用都有一个文件系统，LLM 可以在其中按需读取、写入和处理文件。

文件系统包含两类文件：

- **资源**：你提供的持久文件，例如技能（Skill）。

- **产物**：LLM 在每次运行期间生成的临时文件。

<Frame caption=""><img src="/images/workflow_file_system.png" alt="文件系统"/></Frame>

## 资源

资源是你为工作流创建或导入的文件。LLM 可以读取但不能修改它们。资源在多次运行之间持久保存，并在导出应用时一起包含。

### 技能（Skill）

[技能（Skill）](https://agentskills.io/home)将指令、知识、脚本和其他参考资料打包用于特定任务——定义一次，跨工作流复用。

例如，你无需每次都重复风格指南并上传品牌素材来让 LLM 生成营销文案，只需创建一个 `marketing-copy` Skill 并将所有内容包含在内，在需要时直接引用即可。

#### 创建或导入 Skill

你可以导入已有的 Skill、使用我们提供的 Skill 模板，或直接在文件系统中创建自定义 Skill。

每个 Skill 都需要一个 `SKILL.md` 文件，定义任务内容、使用时机以及执行步骤。

在 `SKILL.md` 中，你可以引用任何可用的资源——脚本、模板、上下文材料或 [Dify 工具](/zh/use-dify/workspace/tools)——并指定使用的时机和方式。

<Frame caption=""><img src="/images/workflow_skill.png" alt="Skill"/></Frame>

#### 在提示词中引用 Skill

在提示词编辑器中输入 `/`，然后从**文件**选项卡中选择一个 Skill 文件夹。

LLM 会先读取 Skill 的 frontmatter（名称、描述和元数据），仅在需要时才加载完整内容。这节省了 Token 并提高了效率，尤其是在使用多个 Skill 时。

## 产物

产物是 LLM 在执行过程中生成的文件——报告、图片或其他任何输出。LLM 对产物拥有完整的读写权限。

你可以在 **Skills** 选项卡或画布底部的**变量检查**面板中预览和下载产物。

### 产物生命周期

产物在测试和生产环境中具有不同的生命周期。导出应用时不包含产物。

<Tabs>
  <Tab title="测试运行 / 预览">
    产物在多次测试运行之间持久保存。要清除它们，请点击**变量检查**面板中的**全部重置**。
  </Tab>
  <Tab title="生产环境">
    产物的范围限定在每次运行中，运行完成后自动清除。
  </Tab>
</Tabs>

<Info>
    你可能还会在**产物**下看到 `.bashrc` 和 `.profile` 等系统文件。这些是沙盒环境的一部分，在多次运行之间持久保存。
</Info>

### 向终端用户输出产物

产物存储在沙盒环境中，无法直接暴露给终端用户。要输出产物，你需要通过另一个 Agent 节点来提取：

1. 在生成文件的节点下游添加一个 Agent 节点。

2. 关闭 **Agent 模式**并启用**结构化输出**。

3. 添加一个文件类型的结构化输出变量。

4. 通过**添加对话历史**导入上游 Agent 的对话历史。这让 LLM 可以定位文件路径。

5. 在用户消息中，指示模型提取并输出文件（例如"输出生成的 PDF 文件"）。

6. 在回答节点或输出节点中，引用 Agent 节点的文件输出变量。

## 支持的文件类型和操作

文件系统中的所有文件都可以下载。部分文件还可以预览或编辑。

<Tabs>
    <Tab title="可编辑">
    <Info>
        只有资源可以编辑。
    </Info>
    - **文本**: TXT, MD, MDX, HTML, HTM, XML, CSV
    - **代码**: Python, JavaScript, JSON, YAML 以及所有 [Monaco Editor](https://microsoft.github.io/monaco-editor/) 支持的语言
    - **配置**: PROPERTIES, VTT
    </Tab>
    <Tab title="仅预览">
        - **文档**: PDF, DOCX, DOC, XLSX, XLS, PPTX, PPT, EPUB
        - **图片**: JPG, JPEG, PNG, GIF, WEBP, SVG
        - **数据**: CSV, TSV, SQLite (.sqlite, .db) - 仅表格预览
        - **邮件**: EML, MSG
    </Tab>
    <Tab title="仅下载">
        - **音频**: MP3, M4A, WAV, WEBM, AMR
        - **视频**: MP4, MOV, MPEG, MPGA
        - **其他**: 自定义文件扩展名
    </Tab>
</Tabs>
