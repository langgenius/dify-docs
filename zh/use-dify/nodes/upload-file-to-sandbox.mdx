---
title: "上传文件至沙盒"
description: "将多模态文件上传至沙盒，让 LLM 可以使用工具和脚本处理它们——即使是模型原生不支持的文件类型"
icon: "upload"
---

<Note> ⚠️ 本文档由 AI 自动翻译。如有任何不准确之处，请参考[英文原版](/en/use-dify/nodes/upload-file-to-sandbox)。</Note>

<Info>
    此节点仅在使用沙盒运行时的应用中可用。
</Info>

当文件直接传递给 LLM 时，处理能力受限于模型自身的多模态能力。虽然[文档提取](/zh/use-dify/nodes/doc-extractor)节点可以将各种文件类型转换为文本供 LLM 处理，但其支持的格式仍然有限。

这就是"上传文件至沙盒"节点的用武之地。文件上传后，下游的 [Agent 节点](/zh/use-dify/nodes/agent#沙盒运行时)（启用了 **Agent 模式**）可以执行命令来安装工具和运行脚本，将文件转换为 LLM 可处理的格式。

<Info>
    - 处理结果取决于模型的推理能力。
    - 在生产环境中，这些上传的文件范围限定在每次运行中，不会在沙盒中持久保存。
</Info>

**使用方法：**

1. 在"上传文件至沙盒"节点中，选择一个文件变量（例如来自用户输入的变量）。支持 `file` 和 `array[file]` 数据类型。

2. 在下游 Agent 节点的提示词中，引用 `sandbox_path` 和 `file_name` 变量，以便模型定位和处理文件。例如：

    ```bash wrap
    # System instruction
    You are a data analyst. Analyze uploaded data files and provide insights.

    # User message
    Analyze the data in "{{Upload File to Sandbox.file_name}}" at {{Upload File to Sandbox.sandbox_path}}.
    ```

    <Info>
        `file_name` 变量还包含文件扩展名（例如 `data.csv`）。
    </Info>
