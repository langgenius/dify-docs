---
title: 环境变量说明
---

<Warning>
本文档可能未及时更新，请优先参考最新的配置文件：

- [docker-compose.yaml](https://github.com/langgenius/dify/blob/5f8d20b5b2bb51f19547467167b18d9c0f6ffbb8/docker/docker-compose.yaml)
- [.env.example](https://github.com/langgenius/dify/blob/5f8d20b5b2bb51f19547467167b18d9c0f6ffbb8/docker/.env.example)
</Warning>

本文档详细说明了 Dify 自托管安装时可配置的环境变量。这些配置项在 `.env` 文件中设置，您可以基于 `.env.example` 文件进行修改。

## 通用配置

这些变量影响 Dify 的基本功能和服务地址。

| 变量名 | 描述 | 默认值 |
|-------|------|--------|
| `CONSOLE_API_URL` | 控制台 API 的后端 URL，用于拼接授权回调地址。如果为空，则使用相同域名。 | 空 |
| `CONSOLE_WEB_URL` | 控制台 Web 的前端 URL，用于拼接前端地址和配置 CORS。如果为空，则使用相同域名。 | 空 |
| `SERVICE_API_URL` | 服务 API URL，用于在前端显示服务 API 基础 URL。如果为空，则使用相同域名。 | 空 |
| `APP_API_URL` | WebApp API 后端 URL，用于声明前端 API 的后端 URL。如果为空，则使用相同域名。 | 空 |
| `APP_WEB_URL` | WebApp URL，用于在前端显示 WebApp API 基础 URL。如果为空，则使用相同域名。 | 空 |
| `FILES_URL` | 文件预览或下载 URL 前缀，用于在前端显示文件预览或下载 URL，或作为多模型输入。URL 是签名的并具有过期时间。 | 空 |

## 服务器配置

控制 Dify 服务器的基本行为。

| 变量名 | 描述 | 默认值 |
|-------|------|--------|
| `LOG_LEVEL` | 应用程序的日志级别。支持的值为 `DEBUG`、`INFO`、`WARNING`、`ERROR`、`CRITICAL`。 | `INFO` |
| `LOG_FILE` | 日志文件路径 | `/app/logs/server.log` |
| `LOG_FILE_MAX_SIZE` | 日志文件最大大小，单位为 MB | `20` |
| `LOG_FILE_BACKUP_COUNT` | 日志文件最大备份数量 | `5` |
| `LOG_DATEFORMAT` | 日志日期格式 | `%Y-%m-%d %H:%M:%S` |
| `LOG_TZ` | 日志时区 | `UTC` |
| `DEBUG` | 调试模式，默认为 false。建议在本地开发时打开此配置，以防止由猴子补丁引起的一些问题。 | `false` |
| `FLASK_DEBUG` | Flask 调试模式，开启后可以在接口处输出跟踪信息，方便调试。 | `false` |
| `SECRET_KEY` | 用于安全签署会话 cookie 和加密数据库上的敏感信息的密钥。可以使用 `openssl rand -base64 42` 生成强密钥。 | `sk-9f73s3ljTXVcMT3Blb3ljTqtsKiGHXVcMT3BlbkFJLK7U` |
| `INIT_PASSWORD` | 管理员用户初始化密码。如果不设置，创建初始管理员账户时将不会提示输入密码。密码长度不能超过 30 个字符。 | 空 |
| `DEPLOY_ENV` | 部署环境。支持的值为 `PRODUCTION`、`TESTING`。默认为 `PRODUCTION`。测试环境下，前端页面上将有明显的颜色标签，表明此环境是测试环境。 | `PRODUCTION` |
| `CHECK_UPDATE_URL` | 是否启用版本检查策略。如果设置为空，将调用 https://updates.dify.ai 进行版本检查。 | `https://updates.dify.ai` |
| `OPENAI_API_BASE` | 用于更改 OpenAI 基础地址，默认为 https://api.openai.com/v1。当在中国无法访问 OpenAI 时，可替换为国内镜像地址，或当本地模型提供 OpenAI 兼容 API 时，可以替换。 | `https://api.openai.com/v1` |
| `MIGRATION_ENABLED` | 启用后，将在应用程序启动前执行迁移，应用程序将在迁移完成后启动。 | `true` |
| `FILES_ACCESS_TIMEOUT` | 文件访问时间，指定文件被访问的时间间隔（秒）。默认值为 300 秒。 | `300` |
| `ACCESS_TOKEN_EXPIRE_MINUTES` | 访问令牌过期时间（分钟） | `60` |
| `REFRESH_TOKEN_EXPIRE_DAYS` | 刷新令牌过期时间（天） | `30` |
| `APP_MAX_ACTIVE_REQUESTS` | 应用程序的最大活动请求数，0 表示无限制，应为非负整数。 | `0` |
| `APP_MAX_EXECUTION_TIME` | 应用程序最大执行时间（秒） | `1200` |

## 容器启动相关配置

这些配置仅在使用 Docker 镜像或 Docker Compose 启动时有效。

| 变量名 | 描述 | 默认值 |
|-------|------|--------|
| `DIFY_BIND_ADDRESS` | API 服务绑定地址，默认：0.0.0.0，即所有地址都可以访问。 | `0.0.0.0` |
| `DIFY_PORT` | API 服务绑定端口号，默认 5001。 | `5001` |
| `SERVER_WORKER_AMOUNT` | API 服务器工作进程数量，即工作线程数。公式：CPU 核心数 x 2 + 1（同步）或 1（Gevent） | `1` |
| `SERVER_WORKER_CLASS` | 默认为 gevent。如果使用 Windows，可以切换为 sync 或 solo。 | `gevent` |
| `SERVER_WORKER_CONNECTIONS` | 默认工作连接数，默认为 10。 | `10` |
| `CELERY_WORKER_CLASS` | 与 SERVER_WORKER_CLASS 类似。如果使用 Windows，可以切换为 sync 或 solo。 | 空 |
| `GUNICORN_TIMEOUT` | 请求处理超时时间。默认为 200，建议设为 360 以支持更长的 SSE 连接时间。 | `360` |
| `CELERY_WORKER_AMOUNT` | Celery 工作线程数。默认为 1，可根据需要设置。 | 空 |
| `CELERY_AUTO_SCALE` | 是否启用 Celery 工作线程自动缩放。自动缩放对于 CPU 密集型任务很有用，可以根据工作负载动态分配和释放。默认为 false（即禁用自动缩放）。 | `false` |
| `CELERY_MAX_WORKERS` | Celery 自动缩放的最大工作线程数。这是可选的，仅当启用自动缩放时使用。 | 空 |
| `CELERY_MIN_WORKERS` | Celery 自动缩放的最小工作线程数。这是可选的，仅当启用自动缩放时使用。 | 空 |
| `API_TOOL_DEFAULT_CONNECT_TIMEOUT` | API 工具默认连接超时时间 | `10` |
| `API_TOOL_DEFAULT_READ_TIMEOUT` | API 工具默认读取超时时间 | `60` |

## 数据源配置

为不同的网站爬虫引擎配置。

| 变量名 | 描述 | 默认值 |
|-------|------|--------|
| `ENABLE_WEBSITE_JINAREADER` | 启用 Jina Reader 网站抓取 | `true` |
| `ENABLE_WEBSITE_FIRECRAWL` | 启用 Firecrawl 网站抓取 | `true` |
| `ENABLE_WEBSITE_WATERCRAWL` | 启用 Watercrawl 网站抓取 | `true` |

## 数据库配置

Dify 使用 PostgreSQL 数据库。

| 变量名 | 描述 | 默认值 |
|-------|------|--------|
| `DB_USERNAME` | 数据库用户名 | `postgres` |
| `DB_PASSWORD` | 数据库密码 | `difyai123456` |
| `DB_HOST` | 数据库主机 | `db` |
| `DB_PORT` | 数据库端口 | `5432` |
| `DB_DATABASE` | 数据库名称 | `dify` |
| `SQLALCHEMY_POOL_SIZE` | 数据库连接池大小。默认为 30 个连接，可以适当增加。 | `30` |
| `SQLALCHEMY_POOL_RECYCLE` | 数据库连接池回收时间，默认为 3600 秒。 | `3600` |
| `SQLALCHEMY_ECHO` | 是否打印 SQL，默认为 false。 | `false` |
| `POSTGRES_MAX_CONNECTIONS` | 数据库最大连接数，默认为 100 | `100` |
| `POSTGRES_SHARED_BUFFERS` | PostgreSQL 共享缓冲区大小，默认为 128MB，建议值：可用内存的 25% | `128MB` |
| `POSTGRES_WORK_MEM` | 每个数据库工作进程的工作内存，默认为 4MB | `4MB` |
| `POSTGRES_MAINTENANCE_WORK_MEM` | 维护活动的保留内存，默认为 64MB | `64MB` |
| `POSTGRES_EFFECTIVE_CACHE_SIZE` | 规划器对有效缓存大小的假设，默认为 4096MB | `4096MB` |

## Redis 配置

Redis 用于缓存和会话期间的发布/订阅。

| 变量名 | 描述 | 默认值 |
|-------|------|--------|
| `REDIS_HOST` | Redis 主机 | `redis` |
| `REDIS_PORT` | Redis 端口 | `6379` |
| `REDIS_USERNAME` | Redis 用户名 | 空 |
| `REDIS_PASSWORD` | Redis 密码 | `difyai123456` |
| `REDIS_USE_SSL` | 是否使用 SSL 连接 Redis | `false` |
| `REDIS_DB` | Redis 数据库编号 | `0` |
| `REDIS_USE_SENTINEL` | 是否使用 Redis Sentinel 模式 | `false` |
| `REDIS_SENTINELS` | Redis Sentinel 节点列表，格式：`<sentinel1_ip>:<sentinel1_port>,<sentinel2_ip>:<sentinel2_port>` | 空 |
| `REDIS_SENTINEL_SERVICE_NAME` | Redis Sentinel 服务名称 | 空 |
| `REDIS_SENTINEL_USERNAME` | Redis Sentinel 用户名 | 空 |
| `REDIS_SENTINEL_PASSWORD` | Redis Sentinel 密码 | 空 |
| `REDIS_SENTINEL_SOCKET_TIMEOUT` | Redis Sentinel 套接字超时 | `0.1` |
| `REDIS_USE_CLUSTERS` | 是否使用 Redis 集群 | `false` |
| `REDIS_CLUSTERS` | Redis 集群节点列表 | 空 |
| `REDIS_CLUSTERS_PASSWORD` | Redis 集群密码 | 空 |

## Celery 配置

用于任务队列和异步处理。

| 变量名 | 描述 | 默认值 |
|-------|------|--------|
| `CELERY_BROKER_URL` | Celery 代理 URL，使用 Redis 作为代理 | `redis://:difyai123456@redis:6379/1` |
| `BROKER_USE_SSL` | 是否使用 SSL 连接代理 | `false` |
| `CELERY_USE_SENTINEL` | 是否使用 Redis Sentinel | `false` |
| `CELERY_SENTINEL_MASTER_NAME` | Celery Sentinel 主节点名称 | 空 |
| `CELERY_SENTINEL_SOCKET_TIMEOUT` | Celery Sentinel 套接字超时 | `0.1` |

## CORS 配置

用于设置前端跨域访问策略。

| 变量名 | 描述 | 默认值 |
|-------|------|--------|
| `WEB_API_CORS_ALLOW_ORIGINS` | Web API 跨域请求允许的来源 | `*` |
| `CONSOLE_CORS_ALLOW_ORIGINS` | 控制台 API 跨域请求允许的来源 | `*` |

## 文件存储配置

Dify 支持多种文件存储方式。

| 变量名 | 描述 | 默认值 |
|-------|------|--------|
| `STORAGE_TYPE` | 存储用户文件的存储类型 | `opendal` |
| `OPENDAL_SCHEME` | OpenDAL 存储的方案名称 | `fs` |
| `OPENDAL_FS_ROOT` | OpenDAL 本地文件系统根目录 | `storage` |

此外，Dify 还支持配置 S3、Azure Blob、Google Storage、阿里云 OSS、腾讯 COS、Oracle Storage、华为 OBS、火山引擎 TOS、百度 OBS 和 Supabase Storage 等多种云存储服务。

## 向量数据库配置

Dify 支持多种向量数据库。

| 变量名 | 描述 | 默认值 |
|-------|------|--------|
| `VECTOR_STORE` | 要使用的向量存储类型 | `weaviate` |

支持的向量数据库包括：`weaviate`、`qdrant`、`milvus`、`myscale`、`relyt`、`pgvector`、`pgvecto-rs`、`chroma`、`opensearch`、`tidb_vector`、`oracle`、`tencent`、`elasticsearch`、`elasticsearch-ja`、`analyticdb`、`couchbase`、`vikingdb`、`oceanbase`、`opengauss`、`tablestore` 等。

每种向量数据库都有其特定的配置变量，例如：

### Weaviate 配置
```
WEAVIATE_ENDPOINT=http://weaviate:8080
WEAVIATE_API_KEY=WVF5YThaHlkYwhGUSmCRgsX3tD5ngdN8pkih
```

### Qdrant 配置
```
QDRANT_URL=http://qdrant:6333
QDRANT_API_KEY=difyai123456
QDRANT_CLIENT_TIMEOUT=20
QDRANT_GRPC_ENABLED=false
QDRANT_GRPC_PORT=6334
```

## 知识库配置

控制文件上传和处理。

| 变量名 | 描述 | 默认值 |
|-------|------|--------|
| `UPLOAD_FILE_SIZE_LIMIT` | 上传文件大小限制，默认 15M | `15` |
| `UPLOAD_FILE_BATCH_LIMIT` | 一次可以上传的最大文件数，默认 5 | `5` |
| `ETL_TYPE` | ETL 类型，支持：`dify`、`Unstructured` | `dify` |
| `UNSTRUCTURED_API_URL` | Unstructured API 路径 | 空 |
| `UNSTRUCTURED_API_KEY` | Unstructured API 密钥 | 空 |
| `SCARF_NO_ANALYTICS` | 不进行数据分析 | `true` |

## 模型配置

| 变量名 | 描述 | 默认值 |
|-------|------|--------|
| `PROMPT_GENERATION_MAX_TOKENS` | 提示生成允许的最大令牌数 | `512` |
| `CODE_GENERATION_MAX_TOKENS` | 代码生成允许的最大令牌数 | `1024` |
| `PLUGIN_BASED_TOKEN_COUNTING_ENABLED` | 启用或禁用基于插件的令牌计数 | `false` |

## 多模态配置

| 变量名 | 描述 | 默认值 |
|-------|------|--------|
| `MULTIMODAL_SEND_FORMAT` | 多模态模型输入时发送图像/视频/音频/文档的格式，默认为 base64，可选 url | `base64` |
| `UPLOAD_IMAGE_FILE_SIZE_LIMIT` | 上传图像文件大小限制，默认 10M | `10` |
| `UPLOAD_VIDEO_FILE_SIZE_LIMIT` | 上传视频文件大小限制，默认 100M | `100` |
| `UPLOAD_AUDIO_FILE_SIZE_LIMIT` | 上传音频文件大小限制，默认 50M | `50` |

## Sentry 配置

用于应用程序监控和错误日志跟踪。

| 变量名 | 描述 | 默认值 |
|-------|------|--------|
| `SENTRY_DSN` | Sentry DSN 地址 | 空 |
| `API_SENTRY_DSN` | API 服务 Sentry DSN 地址 | 空 |
| `API_SENTRY_TRACES_SAMPLE_RATE` | API 服务 Sentry 事件的报告比例 | `1.0` |
| `API_SENTRY_PROFILES_SAMPLE_RATE` | API 服务 Sentry 配置文件的报告比例 | `1.0` |
| `WEB_SENTRY_DSN` | Web 服务 Sentry DSN 地址 | 空 |

## Notion 集成配置

| 变量名 | 描述 | 默认值 |
|-------|------|--------|
| `NOTION_INTEGRATION_TYPE` | 配置为 "public" 或 "internal" | `public` |
| `NOTION_CLIENT_SECRET` | Notion OAuth 客户端密钥 | 空 |
| `NOTION_CLIENT_ID` | Notion OAuth 客户端 ID | 空 |
| `NOTION_INTERNAL_SECRET` | Notion 内部集成密钥 | 空 |

## 邮件相关配置

| 变量名 | 描述 | 默认值 |
|-------|------|--------|
| `MAIL_TYPE` | 邮件类型，支持：resend, smtp | `resend` |
| `MAIL_DEFAULT_SEND_FROM` | 默认发送邮件地址 | 空 |
| `RESEND_API_URL` | Resend 邮件提供商的 API-URL | `https://api.resend.com` |
| `RESEND_API_KEY` | Resend 邮件提供商的 API-Key | `your-resend-api-key` |
| `SMTP_SERVER` | SMTP 服务器地址 | 空 |
| `SMTP_PORT` | SMTP 端口 | `465` |
| `SMTP_USERNAME` | SMTP 用户名 | 空 |
| `SMTP_PASSWORD` | SMTP 密码 | 空 |
| `SMTP_USE_TLS` | 是否使用 TLS | `true` |
| `SMTP_OPPORTUNISTIC_TLS` | 是否使用投机式 TLS | `false` |

## 其他配置

| 变量名 | 描述 | 默认值 |
|-------|------|--------|
| `INDEXING_MAX_SEGMENTATION_TOKENS_LENGTH` | 索引的最大分段令牌长度 | `4000` |
| `INVITE_EXPIRY_HOURS` | 成员邀请链接有效时间（小时） | `72` |
| `RESET_PASSWORD_TOKEN_EXPIRY_MINUTES` | 重置密码令牌有效时间（分钟） | `5` |
| `CODE_EXECUTION_ENDPOINT` | 沙盒服务端点 | `http://sandbox:8194` |
| `CODE_EXECUTION_API_KEY` | 代码执行 API 密钥 | `dify-sandbox` |
| `CODE_MAX_NUMBER` | 代码最大数字 | `9223372036854775807` |
| `CODE_MIN_NUMBER` | 代码最小数字 | `-9223372036854775808` |
| `CODE_MAX_DEPTH` | 代码最大深度 | `5` |
| `CODE_MAX_PRECISION` | 代码最大精度 | `20` |
| `CODE_MAX_STRING_LENGTH` | 代码最大字符串长度 | `80000` |
| `CODE_MAX_STRING_ARRAY_LENGTH` | 代码最大字符串数组长度 | `30` |
| `CODE_MAX_OBJECT_ARRAY_LENGTH` | 代码最大对象数组长度 | `30` |
| `CODE_MAX_NUMBER_ARRAY_LENGTH` | 代码最大数字数组长度 | `1000` |
| `CODE_EXECUTION_CONNECT_TIMEOUT` | 代码执行连接超时时间 | `10` |
| `CODE_EXECUTION_READ_TIMEOUT` | 代码执行读取超时时间 | `60` |
| `CODE_EXECUTION_WRITE_TIMEOUT` | 代码执行写入超时时间 | `10` |
| `TEMPLATE_TRANSFORM_MAX_LENGTH` | 模板转换最大长度 | `80000` |

## 工作流配置

| 变量名 | 描述 | 默认值 |
|-------|------|--------|
| `WORKFLOW_MAX_EXECUTION_STEPS` | 工作流最大执行步骤数 | `500` |
| `WORKFLOW_MAX_EXECUTION_TIME` | 工作流最大执行时间（秒） | `1200` |
| `WORKFLOW_CALL_MAX_DEPTH` | 工作流调用最大深度 | `5` |
| `MAX_VARIABLE_SIZE` | 最大变量大小 | `204800` |
| `WORKFLOW_PARALLEL_DEPTH_LIMIT` | 工作流并行深度限制 | `3` |
| `WORKFLOW_FILE_UPLOAD_LIMIT` | 工作流文件上传限制 | `10` |
| `WORKFLOW_NODE_EXECUTION_STORAGE` | 工作流存储配置，选项：rdbms, hybrid | `rdbms` |
| `HTTP_REQUEST_NODE_MAX_BINARY_SIZE` | 工作流中 HTTP 请求节点的最大二进制大小 | `10485760` |
| `HTTP_REQUEST_NODE_MAX_TEXT_SIZE` | 工作流中 HTTP 请求节点的最大文本大小 | `1048576` |
| `HTTP_REQUEST_NODE_SSL_VERIFY` | 工作流中 HTTP 请求节点的 SSL 验证 | `True` |
| `SSRF_PROXY_HTTP_URL` | SSRF 代理服务器 HTTP URL | `http://ssrf_proxy:3128` |
| `SSRF_PROXY_HTTPS_URL` | SSRF 代理服务器 HTTPS URL | `http://ssrf_proxy:3128` |
| `LOOP_NODE_MAX_COUNT` | 工作流中最大循环次数 | `100` |
| `MAX_TOOLS_NUM` | 代理中可以使用的最大工具数量 | `10` |
| `MAX_PARALLEL_LIMIT` | 工作流中最大并行分支数 | `10` |
| `MAX_ITERATIONS_NUM` | 代理设置的最大迭代次数 | `5` |
| `MAX_SUBMIT_COUNT` | 并行节点执行的最大提交线程数 | `100` |
| `TOP_K_MAX_VALUE` | RAG 的最大 top-k 值 | `10` |

## Web 服务环境变量

| 变量名 | 描述 | 默认值 |
|-------|------|--------|
| `TEXT_GENERATION_TIMEOUT_MS` | 文本生成超时时间（毫秒） | `60000` |

## Nginx 反向代理配置

| 变量名 | 描述 | 默认值 |
|-------|------|--------|
| `NGINX_SERVER_NAME` | Nginx 服务器名称 | `_` |
| `NGINX_HTTPS_ENABLED` | 是否启用 HTTPS | `false` |
| `NGINX_PORT` | HTTP 端口 | `80` |
| `NGINX_SSL_PORT` | SSL 端口 | `443` |
| `NGINX_SSL_CERT_FILENAME` | SSL 证书文件名 | `dify.crt` |
| `NGINX_SSL_CERT_KEY_FILENAME` | SSL 证书密钥文件名 | `dify.key` |
| `NGINX_SSL_PROTOCOLS` | SSL 协议 | `TLSv1.1 TLSv1.2 TLSv1.3` |
| `NGINX_WORKER_PROCESSES` | Nginx 工作进程数 | `auto` |
| `NGINX_CLIENT_MAX_BODY_SIZE` | Nginx 客户端最大主体大小 | `15M` |
| `NGINX_KEEPALIVE_TIMEOUT` | Nginx keepalive 超时 | `65` |
| `NGINX_PROXY_READ_TIMEOUT` | Nginx 代理读取超时 | `3600s` |
| `NGINX_PROXY_SEND_TIMEOUT` | Nginx 代理发送超时 | `3600s` |
| `NGINX_ENABLE_CERTBOT_CHALLENGE` | 是否接受 /.well-known/acme-challenge/ 的请求 | `false` |
| `EXPOSE_NGINX_PORT` | 暴露的 Nginx 端口 | `80` |
| `EXPOSE_NGINX_SSL_PORT` | 暴露的 Nginx SSL 端口 | `443` |

## Certbot 配置

用于自动管理 SSL 证书。

| 变量名 | 描述 | 默认值 |
|-------|------|--------|
| `CERTBOT_EMAIL` | 电子邮件地址（从 Let's Encrypt 获取证书所必需） | `your_email@example.com` |
| `CERTBOT_DOMAIN` | 域名 | `your_domain.com` |
| `CERTBOT_OPTIONS` | certbot 命令选项 | 空 |

## 插件守护程序配置

| 变量名 | 描述 | 默认值 |
|-------|------|--------|
| `DB_PLUGIN_DATABASE` | 插件数据库名称 | `dify_plugin` |
| `EXPOSE_PLUGIN_DAEMON_PORT` | 暴露的插件守护程序端口 | `5002` |
| `PLUGIN_DAEMON_PORT` | 插件守护程序端口 | `5002` |
| `PLUGIN_DAEMON_KEY` | 插件守护程序密钥 | `lYkiYYT6owG+71oLerGzA7GXCgOT++6ovaezWAjpCjf+Sjc3ZtU+qUEi` |
| `PLUGIN_DAEMON_URL` | 插件守护程序 URL | `http://plugin_daemon:5002` |
| `PLUGIN_MAX_PACKAGE_SIZE` | 插件最大包大小 | `52428800` |
| `PLUGIN_PPROF_ENABLED` | 是否启用插件性能分析 | `false` |
| `PLUGIN_DEBUGGING_HOST` | 插件调试主机 | `0.0.0.0` |
| `PLUGIN_DEBUGGING_PORT` | 插件调试端口 | `5003` |
| `EXPOSE_PLUGIN_DEBUGGING_HOST` | 暴露的插件调试主机 | `localhost` |
| `EXPOSE_PLUGIN_DEBUGGING_PORT` | 暴露的插件调试端口 | `5003` |
| `PLUGIN_DIFY_INNER_API_KEY` | 插件 Dify 内部 API 密钥 | `QaHbTe77CtuXmsfyhR7+vRjI/+XbV1AaFy691iy+kGDv2Jvy0/eAh8Y1` |
| `PLUGIN_DIFY_INNER_API_URL` | 插件 Dify 内部 API URL | `http://api:5001` |
| `ENDPOINT_URL_TEMPLATE` | 端点 URL 模板 | `http://localhost/e/{hook_id}` |
| `MARKETPLACE_ENABLED` | 是否启用市场 | `true` |
| `MARKETPLACE_API_URL` | 市场 API URL | `https://marketplace.dify.ai` |
| `FORCE_VERIFYING_SIGNATURE` | 是否强制验证签名 | `true` |
| `PLUGIN_PYTHON_ENV_INIT_TIMEOUT` | 插件 Python 环境初始化超时 | `120` |
| `PLUGIN_MAX_EXECUTION_TIMEOUT` | 插件最大执行超时 | `600` |
| `PIP_MIRROR_URL` | PIP 镜像 URL | 空 |

## SSRF 代理配置

| 变量名 | 描述 | 默认值 |
|-------|------|--------|
| `SSRF_HTTP_PORT` | SSRF HTTP 端口 | `3128` |
| `SSRF_COREDUMP_DIR` | SSRF 核心转储目录 | `/var/spool/squid` |
| `SSRF_REVERSE_PROXY_PORT` | SSRF 反向代理端口 | `8194` |
| `SSRF_SANDBOX_HOST` | SSRF 沙盒主机 | `sandbox` |
| `SSRF_DEFAULT_TIME_OUT` | SSRF 默认超时 | `5` |
| `SSRF_DEFAULT_CONNECT_TIME_OUT` | SSRF 默认连接超时 | `5` |
| `SSRF_DEFAULT_READ_TIME_OUT` | SSRF 默认读取超时 | `5` |
| `SSRF_DEFAULT_WRITE_TIME_OUT` | SSRF 默认写入超时 | `5` |

## 模型提供商和工具位置配置

用于指定应用程序中可以使用的模型提供商和工具。

| 变量名 | 描述 | 默认值 |
|-------|------|--------|
| `POSITION_TOOL_PINS` | 固定工具，用逗号分隔值，不要在项目之间加空格 | 空 |
| `POSITION_TOOL_INCLUDES` | 包含工具 | 空 |
| `POSITION_TOOL_EXCLUDES` | 排除工具 | 空 |
| `POSITION_PROVIDER_PINS` | 固定模型提供商 | 空 |
| `POSITION_PROVIDER_INCLUDES` | 包含模型提供商 | 空 |
| `POSITION_PROVIDER_EXCLUDES` | 排除模型提供商 | 空 |

## OTLP 收集器配置

| 变量名 | 描述 | 默认值 |
|-------|------|--------|
| `ENABLE_OTEL` | 是否启用 OTEL | `false` |
| `OTLP_BASE_ENDPOINT` | OTLP 基础端点 | `http://localhost:4318` |
| `OTLP_API_KEY` | OTLP API 密钥 | 空 |
| `OTEL_EXPORTER_TYPE` | OTEL 导出器类型 | `otlp` |
| `OTEL_SAMPLING_RATE` | OTEL 采样率 | `0.1` |
| `OTEL_BATCH_EXPORT_SCHEDULE_DELAY` | OTEL 批量导出调度延迟 | `5000` |
| `OTEL_MAX_QUEUE_SIZE` | OTEL 最大队列大小 | `2048` |
| `OTEL_MAX_EXPORT_BATCH_SIZE` | OTEL 最大导出批大小 | `512` |
| `OTEL_METRIC_EXPORT_INTERVAL` | OTEL 指标导出间隔 | `60000` |
| `OTEL_BATCH_EXPORT_TIMEOUT` | OTEL 批量导出超时 | `10000` |
| `OTEL_METRIC_EXPORT_TIMEOUT` | OTEL 指标导出超时 | `30000` |

## 额外安全配置

| 变量名 | 描述 | 默认值 |
|-------|------|--------|
| `CSP_WHITELIST` | 内容安全策略白名单 | 空 |
| `ALLOW_EMBED` | 防止点击劫持 | `false` |
