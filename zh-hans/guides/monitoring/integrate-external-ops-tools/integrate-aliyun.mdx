---
title: é›†æˆ äº‘ç›‘æ§
---

## ä»€ä¹ˆæ˜¯ äº‘ç›‘æ§

é˜¿é‡Œäº‘æä¾›çš„å…¨æ‰˜ç®¡å…è¿ç»´å¯è§‚æµ‹å¹³å°ï¼Œä¸€é”®å¼€å¯ Dify åº”ç”¨çš„ç›‘æ§è¿½è¸ªå’Œè¯„ä¼°ã€‚

<Info>
äº‘ç›‘æ§ æ”¯æŒpython/go/javaæ¢é’ˆ & å¼€æºOpenTelemetryæ¢é’ˆæ¥å…¥ï¼Œåœ¨ä¸€é”®å¼€å¯ Dify å¤§æ¨¡å‹åº”ç”¨ç›‘æ§å¤–ï¼Œè¿˜æ”¯æŒé€šè¿‡æ— ä¾µå…¥æ¢é’ˆå¯¹ Dify ç»„ä»¶åŠå…¶ä¸Šä¸‹æ¸¸ä¾èµ–çš„å…¨é“¾è·¯å¯è§‚æµ‹ã€‚
æ›´å¤šè¯¦æƒ…ï¼Œè¯·å‚è€ƒ [äº‘ç›‘æ§](https://help.aliyun.com/zh/opentelemetry/user-guide/enable-tracing-for-dify-application)ã€‚
</Info>

## å¦‚ä½•é…ç½® äº‘ç›‘æ§

### 1. è·å–é˜¿é‡Œäº‘ Endpoint å’Œ License Key

1. ç™»å½• [ARMS æ§åˆ¶å°](https://arms.console.aliyun.com/)ï¼Œåœ¨å·¦ä¾§å¯¼èˆªæ å•å‡» **æ¥å…¥ä¸­å¿ƒ**ã€‚
2. åœ¨ **æœåŠ¡ç«¯åº”ç”¨** åŒºåŸŸå•å‡» **OpenTelemetry** å¡ç‰‡ã€‚
3. åœ¨å¼¹å‡ºçš„ **OpenTelemetry** é¢æ¿ä¸­é€‰æ‹©æ•°æ®ä¸ŠæŠ¥æ–¹å¼ä¸º **gRPC**ï¼Œå¹¶ä¾æ®å®é™…éƒ¨ç½²æƒ…å†µé€‰æ‹©è¿æ¥æ–¹å¼å’Œåœ°åŸŸã€‚

   ![](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3938280571/p976945.png)

4. ä¿å­˜ **å…¬ç½‘æ¥å…¥ç‚¹ï¼ˆEndpointï¼‰** å’Œ **é‰´æƒ Tokenï¼ˆLicense Keyï¼‰**ã€‚



### 2. å°† äº‘ç›‘æ§ ä¸ Dify é›†æˆ

> **ğŸ“Œ å‰ææ¡ä»¶**
> Dify Cloud | ç¤¾åŒºç‰ˆæœ¬å·éœ€ â‰¥ v1.6.0

1. ç™»å½• **Dify æ§åˆ¶å°**ï¼Œå¹¶è¿›å…¥éœ€è¦ç›‘æ§çš„ Dify åº”ç”¨ã€‚
2. åœ¨å·¦ä¾§å¯¼èˆªæ å•å‡» **ç›‘æµ‹**ã€‚
3. å•å‡» **è¿½è¸ªåº”ç”¨æ€§èƒ½**ï¼Œç„¶ååœ¨ **äº‘ç›‘æ§** åŒºåŸŸå•å‡» **é…ç½®**ã€‚

   ![](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9647222571/p984812.png)

4. åœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­è¾“å…¥æ­¥éª¤ 1 è·å–çš„ **License Key** å’Œ **Endpoint**ï¼Œå¹¶è‡ªå®šä¹‰ **App Name**ï¼ˆARMS æ§åˆ¶å°æ˜¾ç¤ºçš„åº”ç”¨åç§°ï¼‰ï¼Œç„¶åå•å‡» **ä¿å­˜å¹¶å¯ç”¨**ã€‚



## åœ¨ äº‘ç›‘æ§ ä¸­æŸ¥çœ‹ç›‘æ§æ•°æ®

é…ç½®å®Œæˆåï¼ŒDify å†…åº”ç”¨çš„è°ƒè¯•æˆ–ç”Ÿäº§æ•°æ®å¯ä»¥åœ¨ **äº‘ç›‘æ§** ä¸­è¿›è¡Œç›‘æ§ã€‚

### æ–¹å¼ä¸€ï¼šä» Dify åº”ç”¨è·³è½¬ ARMS æ§åˆ¶å°

åœ¨ Dify æ§åˆ¶å°é€‰æ‹©å·²å¼€å¯åº”ç”¨è¿½è¸ªçš„åº”ç”¨ï¼Œè¿›å…¥ **è¿½è¸ªé…ç½®**ï¼Œåœ¨ **äº‘ç›‘æ§** åŒºåŸŸå•å‡» **æŸ¥çœ‹**ã€‚

![](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9647222571/p984818.png)

### æ–¹å¼äºŒï¼šç›´æ¥åœ¨ ARMS æ§åˆ¶å°æŸ¥çœ‹

åœ¨ ARMS æ§åˆ¶å°çš„ **LLM åº”ç”¨ç›‘æ§ > åº”ç”¨åˆ—è¡¨** é¡µé¢è¿›å…¥å¯¹åº”çš„ Dify åº”ç”¨ã€‚

## ç›‘æµ‹æ•°æ®æ¸…å•

äº‘ç›‘æ§æ”¯æŒé‡‡é›†Difyçš„Workflow/Chatflow/Chat/Agentåº”ç”¨ï¼Œé‡‡é›†æ•°æ®åŒ…æ‹¬å·¥ä½œæµå’Œå·¥ä½œæµèŠ‚ç‚¹çš„æ‰§è¡Œæ˜ç»†ï¼Œæ¶µç›–æ¨¡å‹è°ƒç”¨ã€å·¥å…·è°ƒç”¨ã€çŸ¥è¯†æ£€ç´¢å’Œå„ç±»æµç¨‹èŠ‚ç‚¹çš„æ‰§è¡Œæ˜ç»†æ•°æ®ä»¥åŠä¼šè¯å’Œç”¨æˆ·ä¿¡æ¯ç­‰å…ƒæ•°æ®

### Workflow/Chatflow Traceä¿¡æ¯

**Workflow Trace Info**

* workflow\_id - Workflow çš„å”¯ä¸€æ ‡è¯†
* conversation\_id - å¯¹è¯ ID
* workflow\_run\_id - æ­¤æ¬¡è¿è¡Œçš„ ID
* tenant\_id - ç§Ÿæˆ· ID
* elapsed\_time - æ­¤æ¬¡è¿è¡Œè€—æ—¶
* status - è¿è¡ŒçŠ¶æ€
* version - Workflow ç‰ˆæœ¬
* total\_tokens - æ­¤æ¬¡è¿è¡Œä½¿ç”¨çš„ token æ€»æ•°
* file\_list - å¤„ç†çš„æ–‡ä»¶åˆ—è¡¨
* triggered\_from - è§¦å‘æ­¤æ¬¡è¿è¡Œçš„æ¥æº
* workflow\_run\_inputs - æ­¤æ¬¡è¿è¡Œçš„è¾“å…¥æ•°æ®
* workflow\_run\_outputs - æ­¤æ¬¡è¿è¡Œçš„è¾“å‡ºæ•°æ®
* error - æ­¤æ¬¡è¿è¡Œä¸­å‘ç”Ÿçš„é”™è¯¯
* query - è¿è¡Œæ—¶ä½¿ç”¨çš„æŸ¥è¯¢
* workflow\_app\_log\_id - Workflow åº”ç”¨æ—¥å¿— ID
* message\_id - å…³è”çš„æ¶ˆæ¯ ID
* start\_time - è¿è¡Œå¼€å§‹æ—¶é—´
* end\_time - è¿è¡Œç»“æŸæ—¶é—´
* workflow node executions - workflow èŠ‚ç‚¹è¿è¡Œä¿¡æ¯
* Metadata
  * workflow\_id - Workflow çš„å”¯ä¸€æ ‡è¯†
  * conversation\_id - å¯¹è¯ ID
  * workflow\_run\_id - æ­¤æ¬¡è¿è¡Œçš„ ID
  * tenant\_id - ç§Ÿæˆ· ID
  * elapsed\_time - æ­¤æ¬¡è¿è¡Œè€—æ—¶
  * status - è¿è¡ŒçŠ¶æ€
  * version - Workflow ç‰ˆæœ¬
  * total\_tokens - æ­¤æ¬¡è¿è¡Œä½¿ç”¨çš„ token æ€»æ•°
  * file\_list - å¤„ç†çš„æ–‡ä»¶åˆ—è¡¨
  * triggered\_from - è§¦å‘æ¥æº

### Message Traceä¿¡æ¯

**Message Trace Info**

* message\_id - æ¶ˆæ¯ ID
* message\_data - æ¶ˆæ¯æ•°æ®
* user\_session\_id - ç”¨æˆ·çš„ session\_id
* conversation\_model - å¯¹è¯æ¨¡å¼
* message\_tokens - æ¶ˆæ¯ä¸­çš„ä»¤ç‰Œæ•°
* answer\_tokens - å›ç­”ä¸­çš„ä»¤ç‰Œæ•°
* total\_tokens - æ¶ˆæ¯å’Œå›ç­”ä¸­çš„æ€»ä»¤ç‰Œæ•°
* error - é”™è¯¯ä¿¡æ¯
* inputs - è¾“å…¥æ•°æ®
* outputs - è¾“å‡ºæ•°æ®
* file\_list - å¤„ç†çš„æ–‡ä»¶åˆ—è¡¨
* start\_time - å¼€å§‹æ—¶é—´
* end\_time - ç»“æŸæ—¶é—´
* message\_file\_data - æ¶ˆæ¯å…³è”çš„æ–‡ä»¶æ•°æ®
* conversation\_mode - å¯¹è¯æ¨¡å¼
* Metadata
  * conversation\_id - æ¶ˆæ¯æ‰€å±å¯¹è¯çš„ ID
  * ls\_provider - æ¨¡å‹æä¾›è€…
  * ls\_model\_name - æ¨¡å‹ ID
  * status - æ¶ˆæ¯çŠ¶æ€
  * from\_end\_user\_id - å‘é€ç”¨æˆ·çš„ ID
  * from\_account\_id - å‘é€è´¦æˆ·çš„ ID
  * agent\_based - æ˜¯å¦åŸºäºä»£ç†
  * workflow\_run\_id - å·¥ä½œæµè¿è¡Œ ID
  * from\_source - æ¶ˆæ¯æ¥æº
  * message\_id - æ¶ˆæ¯ ID

### Dataset Retrieval Traceä¿¡æ¯

**Dataset Retrieval Trace Info**

* message\_id - æ¶ˆæ¯ ID
* inputs - è¾“å…¥å†…å®¹
* documents - æ–‡æ¡£æ•°æ®
* start\_time - å¼€å§‹æ—¶é—´
* end\_time - ç»“æŸæ—¶é—´
* message\_data - æ¶ˆæ¯æ•°æ®
* Metadata
  * message\_id æ¶ˆæ¯ ID
  * ls\_provider æ¨¡å‹æä¾›è€…
  * ls\_model\_name æ¨¡å‹ ID
  * status æ¶ˆæ¯çŠ¶æ€
  * from\_end\_user\_id å‘é€ç”¨æˆ·çš„ ID
  * from\_account\_id å‘é€è´¦æˆ·çš„ ID
  * agent\_based æ˜¯å¦åŸºäºä»£ç†
  * workflow\_run\_id å·¥ä½œæµè¿è¡Œ ID
  * from\_source æ¶ˆæ¯æ¥æº

### Tool Traceä¿¡æ¯

**Tool Trace Info**

* message\_id æ¶ˆæ¯ ID
* tool\_name å·¥å…·åç§°
* start\_time å¼€å§‹æ—¶é—´
* end\_time ç»“æŸæ—¶é—´
* tool\_inputs å·¥å…·è¾“å…¥
* tool\_outputs å·¥å…·è¾“å‡º
* message\_data æ¶ˆæ¯æ•°æ®
* error é”™è¯¯ä¿¡æ¯ï¼Œå¦‚æœå­˜åœ¨
* inputs æ¶ˆæ¯çš„è¾“å…¥å†…å®¹
* outputs æ¶ˆæ¯çš„å›ç­”å†…å®¹
* tool\_config å·¥å…·é…ç½®
* time\_cost æ—¶é—´æˆæœ¬
* tool\_parameters å·¥å…·å‚æ•°
* file\_url å…³è”æ–‡ä»¶çš„ URL
* Metadata
  * message\_id æ¶ˆæ¯ ID
  * tool\_name å·¥å…·åç§°
  * tool\_inputs å·¥å…·è¾“å…¥
  * tool\_outputs å·¥å…·è¾“å‡º
  * tool\_config å·¥å…·é…ç½®
  * time\_cost æ—¶é—´æˆæœ¬
  * error é”™è¯¯ä¿¡æ¯
  * tool\_parameters å·¥å…·å‚æ•°
  * message\_file\_id æ¶ˆæ¯æ–‡ä»¶ ID
  * created\_by\_role åˆ›å»ºè€…è§’è‰²
  * created\_user\_id åˆ›å»ºè€…ç”¨æˆ· ID

{/*
Contributing Section
DO NOT edit this section!
It will be automatically generated by the script.
*/}



[ç¼–è¾‘æ­¤é¡µé¢](https://github.com/langgenius/dify-docs/edit/main/zh-hans/guides/monitoring/integrate-external-ops-tools/integrate-aliyun.mdx) | [æäº¤é—®é¢˜](https://github.com/langgenius/dify-docs/issues/new?template=docs.yml)
