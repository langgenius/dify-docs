---
dimensions:
  type:
    primary: reference
    detail: core
  level: beginner
standard_title: Design Rules for Model Plugins
language: en
title: Design Rules for Model Plugins
description: This document defines in detail the core concepts and structures for
  Dify model plugin development, including model providers (Provider), AI model entities
  (AIModelEntity), model types (ModelType), configuration methods (ConfigurateMethod),
  model features (ModelFeature), parameter rules (ParameterRule), price configuration
  (PriceConfig), and detailed data structure specifications for various credential
  modes.
---

Follow these design rules when modelling your provider catalogue. They ensure users receive a consistent configuration experience and that your models integrate cleanly with every Dify surface.

* Model provider rules are based on the [Provider](#provider) entity.
* Model rules are based on the [AIModelEntity](#aimodelentity) entity.

> All entities below are based on `Pydantic BaseModel`, and can be found in the `entities` module.

### Provider

<ParamField path="provider" type="string">
  Provider identifier, e.g.: `openai`
</ParamField>

<ParamField path="label" type="object">
  Provider display name, i18n, can set both `en_US` (English) and `zh_Hans` (Chinese) languages
  
  <ParamField path="zh_Hans" type="string">
    Chinese label, if not set, will default to using `en_US`
  </ParamField>
  
  <ParamField path="en_US" type="string" required>
    English label
  </ParamField>
</ParamField>

<ParamField path="description" type="object">
  Optional multilingual description for Marketplace listings.
</ParamField>

<ParamField path="icon_small" type="object">
  Optional small icon bundle (stored in `_assets`). When provided, an `en_US` entry is required.
</ParamField>

<ParamField path="icon_small_dark" type="object">
  Optional dark-theme variant of the small icon.
</ParamField>

<ParamField path="icon_large" type="object">
  Optional large icon bundle (stored in `_assets`).
</ParamField>

<ParamField path="icon_large_dark" type="object">
  Optional dark-theme variant of the large icon.
</ParamField>

<ParamField path="background" type="string">
  Optional background color (hex).
</ParamField>

<ParamField path="help" type="object">
  Optional help reference with localized titles and URLs.
</ParamField>

<ParamField path="supported_model_types" type="array[ModelType]" required>
  Supported model types.
</ParamField>

<ParamField path="configurate_methods" type="array[ConfigurateMethod]" required>
  Allowed configuration methods (`predefined-model` or `customizable-model`).
</ParamField>

<ParamField path="provider_credential_schema" type="ProviderCredentialSchema">
  Optional provider-level credential forms.
</ParamField>

<ParamField path="model_credential_schema" type="ModelCredentialSchema">
  Optional per-model credential forms (used when `customizable-model` is supported).
</ParamField>

<ParamField path="position" type="object">
  Optional position files that control ordering for each model type.
</ParamField>

### AIModelEntity

<ParamField path="model" type="string" required>
  Model identifier, e.g.: `gpt-3.5-turbo`
</ParamField>

<ParamField path="label" type="object">
  Model display name, i18n, can set both `en_US` (English) and `zh_Hans` (Chinese) languages
  
  <ParamField path="zh_Hans" type="string">
    Chinese label
  </ParamField>
  
  <ParamField path="en_US" type="string" required>
    English label
  </ParamField>
</ParamField>

<ParamField path="model_type" type="ModelType" required>
  Model type
</ParamField>

<ParamField path="features" type="array[ModelFeature]">
  List of supported features
</ParamField>

<ParamField path="fetch_from" type="ConfigurateMethod">
  Optional override for where the model definition is fetched (`predefined-model` or `customizable-model`). Defaults to the provider configuration.
</ParamField>

<ParamField path="model_properties" type="object" required>
  Model properties
  
  <ParamField path="mode" type="LLMMode">
    Mode (available for model type `llm`)
  </ParamField>
  
  <ParamField path="context_size" type="integer">
    Context size (available for model types `llm` and `text-embedding`)
  </ParamField>
  
  <ParamField path="max_chunks" type="integer">
    Maximum number of chunks (available for model types `text-embedding` and `moderation`)
  </ParamField>
  
  <ParamField path="file_upload_limit" type="integer">
    Maximum file upload limit, unit: MB. (available for model type `speech2text`)
  </ParamField>
  
  <ParamField path="supported_file_extensions" type="string">
    Supported file extension formats, e.g.: mp3,mp4 (available for model type `speech2text`)
  </ParamField>
  
  <ParamField path="default_voice" type="string">
    Default voice, required: alloy,echo,fable,onyx,nova,shimmer (available for model type `tts`)
  </ParamField>
  
  <ParamField path="voices" type="array">
    List of available voices (available for model type `tts`)
    
    <ParamField path="mode" type="string">
      Voice model
    </ParamField>
    
    <ParamField path="name" type="string">
      Voice model display name
    </ParamField>
    
    <ParamField path="language" type="string">
      Supported languages for voice model
    </ParamField>
  </ParamField>
  
  <ParamField path="word_limit" type="integer">
    Word limit for single conversion, defaults to paragraph segmentation (available for model type `tts`)
  </ParamField>
  
  <ParamField path="audio_type" type="string">
    Supported audio file extension formats, e.g.: mp3,wav (available for model type `tts`)
  </ParamField>
  
  <ParamField path="max_workers" type="integer">
    Number of concurrent tasks supported for text-to-audio conversion (available for model type `tts`)
  </ParamField>
  
  <ParamField path="max_characters_per_chunk" type="integer">
    Maximum characters per chunk (available for model type `moderation`)
  </ParamField>
</ParamField>

<ParamField path="parameter_rules" type="array[ParameterRule]">
  Model call parameter rules
</ParamField>

<ParamField path="pricing" type="PriceConfig">
  Pricing information
</ParamField>

<ParamField path="deprecated" type="boolean">
  Whether deprecated. If deprecated, the model list will no longer display it, but those already configured can continue to be used. Default is False.
</ParamField>

### ModelType

<ParamField path="llm" type="string">
  Text generation models.
</ParamField>

<ParamField path="text-embedding" type="string">
  Vector embedding models.
</ParamField>

<ParamField path="rerank" type="string">
  Rerank models.
</ParamField>

<ParamField path="speech2text" type="string">
  Speech-to-text models.
</ParamField>

<ParamField path="tts" type="string">
  Text-to-speech models.
</ParamField>

<ParamField path="moderation" type="string">
  Content moderation models.
</ParamField>

<ParamField path="text2img" type="string">
  Text-to-image models.
</ParamField>

### ConfigurateMethod

<ParamField path="predefined-model" type="string">
  Predefined model - Indicates that the user only needs to configure unified provider credentials to use predefined models under the provider.
</ParamField>

<ParamField path="customizable-model" type="string">
  Customizable model - The user needs to add credential configuration for each model.
</ParamField>

### ModelFeature

<ParamField path="agent-thought" type="string">
  Agent reasoning, generally models over 70B have chain-of-thought capabilities.
</ParamField>

<ParamField path="vision" type="string">
  Vision, i.e.: image understanding.
</ParamField>

<ParamField path="tool-call" type="string">
  Tool calling
</ParamField>

<ParamField path="multi-tool-call" type="string">
  Multiple tool calling
</ParamField>

<ParamField path="stream-tool-call" type="string">
  Streaming tool calling
</ParamField>

### FetchFrom

Same enumeration as `ConfigurateMethod`. Use this field in the model declaration when a specific model should be obtained differently from the provider default.

<ParamField path="predefined-model" type="string">
  The model definition is fetched from the plugin manifest.
</ParamField>

<ParamField path="customizable-model" type="string">
  The model requires per-instance configuration by the user.
</ParamField>

### LLMMode

<ParamField path="completion" type="string">
  Text completion
</ParamField>

<ParamField path="chat" type="string">
  Chat
</ParamField>

### ParameterRule

<ParamField path="name" type="string" required>
  Actual parameter name for model call
</ParamField>

<ParamField path="use_template" type="string">
  Use template
</ParamField>

> For details on using templates, you can refer to the examples in [Creating a New Model Provider](/plugin-dev-en/0222-creating-new-model-provider).

There are predefined templates for common parameters:

* `temperature`
* `top_p`
* `top_k`
* `frequency_penalty`
* `presence_penalty`
* `max_tokens`
* `response_format`
* `json_schema`

You can directly set the template variable name in `use_template`, which will use the default configuration from entities.defaults.PARAMETER\_RULE\_TEMPLATE without needing to set any parameters other than `name` and `use_template`. If additional configuration parameters are set, they will override the default configuration. You can refer to `openai/llm/gpt-3.5-turbo.yaml` for examples.

<ParamField path="label" type="object">
  Label, i18n
  
  <ParamField path="zh_Hans" type="string">
    Chinese label
  </ParamField>
  
  <ParamField path="en_US" type="string" required>
    English label
  </ParamField>
</ParamField>

<ParamField path="type" type="string">
  Parameter type
  
  <ParamField path="int" type="string">
    Integer
  </ParamField>
  
  <ParamField path="float" type="string">
    Floating point
  </ParamField>
  
  <ParamField path="string" type="string">
    String
  </ParamField>
  
  <ParamField path="text" type="string">
    Multiline text (rendered with a textarea)
  </ParamField>
  
  <ParamField path="boolean" type="string">
    Boolean
  </ParamField>
</ParamField>

<ParamField path="help" type="object">
  Help information
  
  <ParamField path="zh_Hans" type="string">
    Chinese help information
  </ParamField>
  
  <ParamField path="en_US" type="string" required>
    English help information
  </ParamField>
</ParamField>

<ParamField path="required" type="boolean">
  Whether required, default is False
</ParamField>

<ParamField path="default" type="int/float/string/boolean">
  Default value (primitive types only)
</ParamField>

<ParamField path="min" type="int/float">
  Minimum value, only applicable to numeric types
</ParamField>

<ParamField path="max" type="int/float">
  Maximum value, only applicable to numeric types
</ParamField>

<ParamField path="precision" type="integer">
  Precision, decimal places to retain, only applicable to numeric types
</ParamField>

<ParamField path="options" type="array[string]">
  Dropdown option values. Only applicable when `type` is `string` or `text`.
</ParamField>

### PriceConfig

<ParamField path="input" type="float">
  Input unit price, i.e., Prompt unit price
</ParamField>

<ParamField path="output" type="float">
  Output unit price, i.e., returned content unit price
</ParamField>

<ParamField path="unit" type="float">
  Price unit, e.g., if priced per 1M tokens, then the unit token number corresponding to the unit price is `0.000001`
</ParamField>

<ParamField path="currency" type="string">
  Currency unit
</ParamField>

### ProviderCredentialSchema

<ParamField path="credential_form_schemas" type="array[CredentialFormSchema]">
  Optional list of credential form definitions.
</ParamField>

### ModelCredentialSchema

<ParamField path="model" type="object" required>
  Model identifier, default variable name is `model`
  
  <ParamField path="label" type="object" required>
    Model form item display name
  </ParamField>
  
  <ParamField path="placeholder" type="object">
    Optional placeholder copy.
  </ParamField>
</ParamField>

<ParamField path="credential_form_schemas" type="array[CredentialFormSchema]">
  Optional list of credential form definitions scoped to the model.
</ParamField>

### CredentialFormSchema

<ParamField path="variable" type="string" required>
  Form item variable name
</ParamField>

<ParamField path="label" type="object" required>
  Form item label
  
  <ParamField path="en_US" type="string" required>
    English
  </ParamField>
  
  <ParamField path="zh_Hans" type="string">
    Chinese
  </ParamField>
</ParamField>

<ParamField path="type" type="FormType" required>
  Form item type
</ParamField>

<ParamField path="required" type="boolean">
  Whether required
</ParamField>

<ParamField path="default" type="string">
  Optional default value
</ParamField>

<ParamField path="options" type="array[FormOption]">
  Form item attribute specific to `select` or `radio`, defines dropdown content
</ParamField>

<ParamField path="placeholder" type="object">
  Optional placeholder text, localized.
</ParamField>

<ParamField path="max_length" type="integer">
  Optional character limit for text inputs.
</ParamField>

<ParamField path="show_on" type="array[FormCondition]">
  Optional list of display conditions. Each condition pairs a variable with the value that triggers this field.
</ParamField>

### FormCondition

<ParamField path="variable" type="string" required>
  Variable name whose value controls the visibility of the field.
</ParamField>

<ParamField path="value" type="string" required>
  Value that must match for the field to be shown.
</ParamField>

#### FormType

<ParamField path="text-input" type="string">
  Text input component
</ParamField>

<ParamField path="secret-input" type="string">
  Password input component
</ParamField>

<ParamField path="select" type="string">
  Single-select dropdown
</ParamField>

<ParamField path="radio" type="string">
  Radio component
</ParamField>

<ParamField path="switch" type="string">
  Switch component, only supports `true` and `false`
</ParamField>

#### FormOption

<ParamField path="label" type="object" required>
  Label
  
  <ParamField path="en_US" type="string" required>
    English
  </ParamField>
  
  <ParamField path="zh_Hans" type="string">
    Chinese
  </ParamField>
</ParamField>

<ParamField path="value" type="string" required>
  Dropdown option value
</ParamField>

<ParamField path="show_on" type="array[FormCondition]">
  Optional conditional display rules for the option.
</ParamField>

## Related Resources

- [Model Architecture Details](/plugin-dev-en/0412-model-schema) - Deep dive into the architecture specifications of model plugins
- [Quickly Integrate a New Model](/plugin-dev-en/0211-getting-started-new-model) - Learn how to apply these rules to add new models
- [General Specifications](/plugin-dev-en/0411-general-specifications) - Understand the configuration of plugin manifest files
- [Create a New Model Provider](/plugin-dev-en/0222-creating-new-model-provider) - Develop brand new model provider plugins

{/*
Contributing Section
DO NOT edit this section!
It will be automatically generated by the script.
*/}

---

[Edit this page](https://github.com/langgenius/dify-docs/edit/main/plugin-dev-en/0411-model-designing-rules.mdx) | [Report an issue](https://github.com/langgenius/dify-docs/issues/new?template=docs.yml)
