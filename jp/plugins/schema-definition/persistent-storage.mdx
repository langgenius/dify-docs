---
title: 永続化されたストレージ
---



{/* 
  コントリビューター注:
  ----------------
  これはレガシードキュメントであり、非推奨になります。
  このバージョンに変更を加えないでください。
  すべての更新は新しいバージョンに向けられるべきです：
  /plugin-dev-ja/0411-persistent-storage-kv
*/}

<Card title="このドキュメントはまもなく非推奨になります" icon="circle-exclamation" href="/plugin-dev-ja/0411-persistent-storage-kv">
  <p>ドキュメント再編の一環として、このページは段階的に廃止されます。</p>
  
  <p><u><b>このカードをクリックして</b></u>、最新情報が含まれる更新版にリダイレクトしてください。</p>
  
  <p>新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。</p>
</Card>

プラグイン内のToolとEndpointを個別に見ると、ほとんどの場合、単一のラウンドの対話、つまりリクエストを送信してデータを返し、タスクが終了するだけであることがわかります。

長期的なデータの保存が必要な場合、例えば永続的なメモリを実装する場合、プラグインには永続的なストレージ機能が必要です。**永続ストレージメカニズムにより、プラグインは同じWorkspace内でデータを永続的に保存する機能を持つことができます**。現在はKVデータベースを提供してストレージのニーズを満たしており、将来的には実際の使用状況に基づいて、より柔軟で強力なストレージインターフェースを導入する可能性があります。

### ストレージキー

#### **エントリーポイント**

```python
    self.session.storage
```

#### エンドポイント

```python
    def set(self, key: str, val: bytes) -> None:
        pass
```

bytesが渡されることに注意してください。これにより、実際にファイルを保存することができます。

### キーの取得

#### **エントリーポイント**

```python
    self.session.storage
```

#### **エンドポイント**

```python
    def get(self, key: str) -> bytes:
        pass
```

### キーの削除

#### **エントリーポイント**

```python
    self.session.storage
```

#### **エンドポイント**

```python
    def delete(self, key: str) -> None:
        pass
```

{/*
Contributing Section
DO NOT edit this section!
It will be automatically generated by the script.
*/}

---

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/schema-definition/persistent-storage.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?template=docs.yml)

